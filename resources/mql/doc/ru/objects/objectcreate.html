<h1>ObjectCreate</h1> 
<p><span>Создает объект с указанным именем, типом и начальными координатами в указанном подокне указанного графика. Существует два варианта функции:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; padding:3px;"><p><span>bool&nbsp;&nbsp;</span><span>ObjectCreate</span><span>(</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>long&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>chart_id</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;идентификатор&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>string</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>object_name</span><span>,&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;имя&nbsp;объекта</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>ENUM_OBJECT&nbsp;&nbsp;&nbsp;</span><span>object_type</span><span>,&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;тип&nbsp;объекта</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>sub_window</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;индекс&nbsp;окна</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>datetime</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>time1</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;время&nbsp;первой&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>price1</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;цена&nbsp;первой&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;...</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>datetime</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>timeN=0</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;время&nbsp;N-точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>priceN=0&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;цена&nbsp;N-точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;);</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Создает объект с указанным именем, типом и начальными координатами в указанном подокне текущего графика:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; padding:3px;"><p><span>bool&nbsp;&nbsp;</span><span>ObjectCreate</span><span>(</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>string</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>object_name</span><span>,&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;имя&nbsp;объекта</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>ENUM_OBJECT&nbsp;&nbsp;&nbsp;</span><span>object_type</span><span>,&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;тип&nbsp;объекта</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>sub_window</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;индекс&nbsp;окна</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>datetime</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>time1</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;время&nbsp;первой&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>price1</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;цена&nbsp;первой&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>datetime</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>time2=0</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;время&nbsp;второй&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>price2=0</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;цена&nbsp;второй&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>datetime</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>time3=0</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;время&nbsp;третьей&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>price3=0&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;цена&nbsp;третьей&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;);</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Параметры</span></p> 
<p><span>chart_id</span></p> 
<p><span>[in] &nbsp;Идентификатор графика.</span></p> 
<p><span>object_name</span></p> 
<p><span>[in] &nbsp;Уникальное имя объекта.</span></p> 
<p><span>object_type</span></p> 
<p><span>[in] &nbsp;Тип объекта. Может быть любым из <a href="/constants/objectconstants/enum_object">типов объектов</a>.</span></p>
<p><span>sub_window</span></p> 
<p><span>[in] &nbsp;Индекс окна, в которое будет добавлен объект. Окно должно существовать (индекс окна должен быть большим или равным 0 и меньшим, чем <a href="/chart_operations/windowstotal">WindowsTotal()</a>), иначе функция возвратит false.</span></p>
<p><span>time1</span></p> 
<p><span>[in] &nbsp;Временная координата первой точки привязки.</span></p> 
<p><span>price1</span></p> 
<p><span>[in] &nbsp;Ценовая координата первой точки привязки.</span></p> 
<p><span>time2=0</span></p> 
<p><span>[in] &nbsp;Временная координата второй точки привязки.</span></p> 
<p><span>price2=0</span></p> 
<p><span>[in] &nbsp;Ценовая координата второй точки привязки.</span></p> 
<p><span>time3=0</span></p> 
<p><span>[in] &nbsp;Временная координата третьей точки привязки.</span></p> 
<p><span>price3=0</span></p> 
<p><span>[in] &nbsp;Ценовая координата третьей точки привязки.</span></p> 
<p><span>timeN=0</span></p> 
<p><span>[in] &nbsp;Временная координата N-й точки привязки.</span></p> 
<p><span>priceN=0</span></p> 
<p><span>[in] &nbsp;Ценовая координата N-й точки привязки.</span></p> 
<p><span>Возвращаемое значение</span></p> 
<p><span>При успешном создании объекта функция возвращает true, иначе false. Чтобы получить дополнительную информацию об <a href="/constants/errorswarnings/errorcodes">ошибке</a>, необходимо вызвать функцию <a href="/check/getlasterror">GetLastError()</a>.</span></p>
<p><span>Примечание</span></p> 
<p><span>Число координат, связываемых с объектом, может быть от 1 до 3 в зависимости от типа. &nbsp;Объекты с типом OBJ_LABEL игнорируют координаты. Используйте функцию <a href="/objects/objectset">ObjectSet</a>() для установки свойств OBJPROP_XDISTANCE и OBJPROP_YDISTANCE. Нумерация подокон графика (если на графике есть подокна с индикаторами) начинается с 1. Главное окно графика есть всегда и имеет индекс 0. Координаты должны передаваться парами - время и цена. Для примера, объекту OBJ_VLINE требуется только время, но также нужно передать и цену (любое значение).</span></p>
<p><span>Имя графического объекта не должно превышать 63 символа. Не допускаются символы вне текущей кодовой страницы (символы, которые не могут быть переведены из Unicode в ANSI, заменяются на символ '?'). Если предполагается распространение программ среди пользователей, имеющих различные кодовые страницы, настоятельно рекомендуется использование латинских символов в именах объектов.</span></p> 
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;start()</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;i;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;obj_name=</span><span style="color: #008080;">"label_object"</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">long</span><span>&nbsp;current_chart_id=</span><span style="color: #0000ff;">ChartID</span><span>();</span><br> <span style="color: #808080;">//---&nbsp;создаем&nbsp;объект&nbsp;типа&nbsp;label</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(!</span><span style="color: #0000ff;">ObjectCreate</span><span>(current_chart_id,obj_name,</span><span style="color: #0000ff;">OBJ_LABEL</span><span>,0,0,0))</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Ошибка&nbsp;создания&nbsp;объекта:&nbsp;code&nbsp;#"</span><span>,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(0);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---&nbsp;устанавливаем&nbsp;цвет&nbsp;Red</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetInteger</span><span>(current_chart_id,obj_name,</span><span style="color: #0000ff;">OBJPROP_COLOR</span><span>,</span><span style="color: #0000ff;">clrRed</span><span>);</span><br> <span style="color: #808080;">//---&nbsp;перемещение&nbsp;объекта&nbsp;label&nbsp;и&nbsp;изменение&nbsp;его&nbsp;текста</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(i=0;&nbsp;i&lt;200;&nbsp;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//--&nbsp;устанавливаем&nbsp;текст&nbsp;объекта</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetString</span><span>(current_chart_id,obj_name,</span><span style="color: #0000ff;">OBJPROP_TEXT</span><span>,</span><span style="color: #0000ff;">StringFormat</span><span>(</span><span style="color: #008080;">"Simple&nbsp;Label&nbsp;at&nbsp;y=&nbsp;%d"</span><span>,i));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//--&nbsp;устанавливаем&nbsp;значение&nbsp;координаты&nbsp;Y</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSet</span><span>(obj_name,</span><span style="color: #0000ff;">OBJPROP_YDISTANCE</span><span>,i);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//--&nbsp;перерисовка&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartRedraw</span><span>(current_chart_id);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Sleep</span><span>(10);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---&nbsp;устанавливаем&nbsp;цвет&nbsp;Blue</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetInteger</span><span>(current_chart_id,obj_name,</span><span style="color: #0000ff;">OBJPROP_COLOR</span><span>,</span><span style="color: #0000ff;">clrBlue</span><span>);</span><br> <span style="color: #808080;">//---&nbsp;move&nbsp;object&nbsp;up&nbsp;and&nbsp;change&nbsp;its&nbsp;text</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(i=200;&nbsp;i&gt;0;&nbsp;i--)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//--&nbsp;устанавливаем&nbsp;текст&nbsp;объекта</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetString</span><span>(current_chart_id,obj_name,</span><span style="color: #0000ff;">OBJPROP_TEXT</span><span>,</span><span style="color: #0000ff;">StringFormat</span><span>(</span><span style="color: #008080;">"Simple&nbsp;Label&nbsp;at&nbsp;y=&nbsp;%d"</span><span>,i));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//--&nbsp;устанавливаем&nbsp;значение&nbsp;координаты&nbsp;Y</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSet</span><span>(obj_name,</span><span style="color: #0000ff;">OBJPROP_YDISTANCE</span><span>,i);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//--&nbsp;перерисовка&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartRedraw</span><span>(current_chart_id);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Sleep</span><span>(10);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---&nbsp;удаление&nbsp;объекта</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectDelete</span><span>(obj_name);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(0);</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Смотри также</span></p> 
<p><span><a href="/constants/objectconstants/enum_object">Типы объектов</a> </span></p>
<br>