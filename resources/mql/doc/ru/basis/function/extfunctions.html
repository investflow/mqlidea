<h1>Описание внешних функций</h1> 
<p><span>Внешние функции, определенные в другом модуле, должны быть явно описаны. Описание включает в себя тип возвращаемого значения, имя функции и набор входных параметров с их типами. Отсутствие такого описания может привести к ошибкам при компиляции, компоновке или выполнении программы. При описании внешнего объекта используйте ключевое слово </span><span style="font-style: italic;">#import</span><span> с указанием модуля.</span></p> 
<p><span style="font-weight: bold;">Примеры:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">#import</span><span>&nbsp;</span><span style="color: #008080;">"user32.dll"</span><br> <span>&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageBoxW(</span><span style="color: #0000ff;">int</span><span>&nbsp;hWnd&nbsp;,</span><span style="color: #0000ff;">string</span><span>&nbsp;szText,</span><span style="color: #0000ff;">string</span><span>&nbsp;szCaption,</span><span style="color: #0000ff;">int</span><span>&nbsp;nType);</span><br> <span>&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SendMessageW(</span><span style="color: #0000ff;">int</span><span>&nbsp;hWnd,</span><span style="color: #0000ff;">int</span><span>&nbsp;Msg,</span><span style="color: #0000ff;">int</span><span>&nbsp;wParam,</span><span style="color: #0000ff;">int</span><span>&nbsp;lParam);</span><br> <span style="color: #0000ff;">#import</span><span>&nbsp;</span><span style="color: #008080;">"lib.ex4"</span><br> <span>&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;round(</span><span style="color: #0000ff;">double</span><span>&nbsp;value);</span><br> <span style="color: #0000ff;">#import</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>С помощью импорта можно очень легко описывать функции, вызываемые из внешних DLL или скомпилированных EX4 библиотек. Библиотеками EX4 являются скомпилированные ex4-файлы, которые имеют свойство <a href="/basis/preprosessor/compilation">library</a>. Импортировать из EX4 библиотек можно только функции, описанные с <a href="/basis/function/export">модификатором export</a>.</span></p>
<p><span>При совместном использовании DLL и EX4-библиотек следует помнить о том, что библиотеки должны иметь разные имена (вне зависимости от каталогов их размещения). Все импортируемые функции получают область видимости "имя файла" библиотеки.</span></p> 
<p><span>Если в программе используются или могут в будущем использоваться несколько одноименных функций из разных контекстов исполнения, то может возникнуть неоднозначность. </span><span>Для устранения неоднозначности вызова функций явно указывайте область видимости с помощью <a href="/basis/operations/other#context_allow">операции разрешения контекста</a>.</span></p>
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">#import</span><span>&nbsp;</span><span style="color: #008080;">"kernel32.dll"</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">GetLastError</span><span>();</span><br> <span style="color: #0000ff;">#import</span><span>&nbsp;</span><span style="color: #008080;">"lib.ex4"</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">GetLastError</span><span>();</span><br> <span style="color: #0000ff;">#import</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CFoo</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">GetLastError</span><span>()&nbsp;{&nbsp;</span><span style="color: #0000ff;">return</span><span>(12345);&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;func()</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #0000ff;">GetLastError</span><span>());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-style: italic; color: #808080;">//&nbsp;вызов&nbsp;метода&nbsp;класса</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(::</span><span style="color: #0000ff;">GetLastError</span><span>());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-style: italic; color: #808080;">//&nbsp;вызов&nbsp;функции&nbsp;MQL4</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(kernel32::</span><span style="color: #0000ff;">GetLastError</span><span>());&nbsp;</span><span style="font-style: italic; color: #808080;">//&nbsp;вызов&nbsp;функции&nbsp;kernel32.dll</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(lib::</span><span style="color: #0000ff;">GetLastError</span><span>());&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="font-style: italic; color: #808080;">//&nbsp;вызов&nbsp;функции&nbsp;lib.ex4</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;};</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;CFoo&nbsp;foo;</span><br> <span>&nbsp;&nbsp;&nbsp;foo.func();</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Смотри также</span></p> 
<p><span><a href="/basis/oop/overload">Перегрузка</a>, <a href="/basis/oop/virtual">Виртуальные функции</a>, <a href="/basis/oop/polymorphism">Полиморфизм</a></span></p>
<br>