<h1>Причины деинициализации</h1> 
<p><span>Коды причины деинициализации <a href="/ru#expert">эксперта</a>, возвращаемые функцией <a href="/ru/check/uninitializereason">UninitializeReason()</a>. Могут иметь любые из следующих значений:</span></p> 
<div style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="5" border="1" style="border:solid 2px #b1c2d6; border-spacing:0px; border-collapse:collapse;"> 
  <tbody> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Константа</span></p> </td> 
    <td style="vertical-align:top; width:93px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Значение</span></p> </td> 
    <td style="vertical-align:top; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Описание</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_PROGRAM</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>0</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Эксперт прекратил свою работу, вызвав функцию <a href="/ru/common/expertremove">ExpertRemove()</a></span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_REMOVE</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>1</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Программа удалена с графика</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_RECOMPILE</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>2</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Программа перекомпилирована</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_CHARTCHANGE</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>3</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Символ или период графика был изменен</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_CHARTCLOSE</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>4</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>График закрыт</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_PARAMETERS</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>5</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Входные параметры были изменены пользователем</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_ACCOUNT</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>6</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Активирован другой счет либо произошло переподключение к торговому серверу вследствие изменения настроек счета</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_TEMPLATE</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>7</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Применен другой шаблон графика</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><a id="reason_initfailed"></a><span>REASON_INITFAILED</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>8</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Признак того, что обработчик <a href="/ru/basis/function/events#oninit">OnInit()</a> вернул ненулевое значение</span></p> </td> 
   </tr> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; width:159px; padding:5px; border:solid thin #b1c2d6;"><p><span>REASON_CLOSE</span></p> </td> 
    <td style="vertical-align:top; width:93px; padding:5px; border:solid thin #b1c2d6;"><p style="text-align: center;"><span>9</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Терминал был закрыт</span></p> </td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Код причины деинициализации передается также в качестве параметра предопределенной функции <a href="/ru/basis/function/events#ondeinit">OnDeinit</a>(const int reason).</span></p> 
<p><span>Индикаторы принимают пока только код 1(REASON_REMOVE) и код 2(REASON_RECOMPILE).</span></p> 
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr style="text-align:left;vertical-align:top;"> 
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;get&nbsp;text&nbsp;description&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">string</span><span>&nbsp;getUninitReasonText(</span><span style="color: #0000ff;">int</span><span>&nbsp;reasonCode)</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;text=</span><span style="color: #008080;">""</span><span>;</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">switch</span><span>(reasonCode)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span>&nbsp;</span><span style="color: #0000ff;">REASON_ACCOUNT</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=</span><span style="color: #008080;">"Account&nbsp;was&nbsp;changed"</span><span>;</span><span style="color: #0000ff;">break</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span>&nbsp;</span><span style="color: #0000ff;">REASON_CHARTCHANGE</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=</span><span style="color: #008080;">"Symbol&nbsp;or&nbsp;timeframe&nbsp;was&nbsp;changed"</span><span>;</span><span style="color: #0000ff;">break</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span>&nbsp;</span><span style="color: #0000ff;">REASON_CHARTCLOSE</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=</span><span style="color: #008080;">"Chart&nbsp;was&nbsp;closed"</span><span>;</span><span style="color: #0000ff;">break</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span>&nbsp;</span><span style="color: #0000ff;">REASON_PARAMETERS</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=</span><span style="color: #008080;">"Input-parameter&nbsp;was&nbsp;changed"</span><span>;</span><span style="color: #0000ff;">break</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span>&nbsp;</span><span style="color: #0000ff;">REASON_RECOMPILE</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=</span><span style="color: #008080;">"Program&nbsp;"</span><span>+</span><span style="color: #0000ff;">__FILE__</span><span>+</span><span style="color: #008080;">"&nbsp;was&nbsp;recompiled"</span><span>;</span><span style="color: #0000ff;">break</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span>&nbsp;</span><span style="color: #0000ff;">REASON_REMOVE</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=</span><span style="color: #008080;">"Program&nbsp;"</span><span>+</span><span style="color: #0000ff;">__FILE__</span><span>+</span><span style="color: #008080;">"&nbsp;was&nbsp;removed&nbsp;from&nbsp;chart"</span><span>;</span><span style="color: #0000ff;">break</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">case</span><span>&nbsp;</span><span style="color: #0000ff;">REASON_TEMPLATE</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;text=</span><span style="color: #008080;">"New&nbsp;template&nbsp;was&nbsp;applied&nbsp;to&nbsp;chart"</span><span>;</span><span style="color: #0000ff;">break</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">default</span><span>:text=</span><span style="color: #008080;">"Another&nbsp;reason"</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>&nbsp;text;</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Expert&nbsp;deinitialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnDeinit</span><span>(</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;reason)</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;Первый&nbsp;способ&nbsp;получить&nbsp;код&nbsp;причины&nbsp;деинициализации</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #0000ff;">__FUNCTION__</span><span>,</span><span style="color: #008080;">"_Код&nbsp;причины&nbsp;деинициализации&nbsp;=&nbsp;"</span><span>,reason);</span><br> <span style="color: #808080;">//---&nbsp;Второй&nbsp;способ&nbsp;получить&nbsp;код&nbsp;причины&nbsp;деинициализации</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #0000ff;">__FUNCTION__</span><span>,</span><span style="color: #008080;">"_UninitReason&nbsp;=&nbsp;"</span><span>,getUninitReasonText(</span><span style="color: #ff00ff;">_UninitReason</span><span>));</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<br>