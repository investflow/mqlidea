<h1>Видимость объектов</h1> 
<p><span>Сочетание флагов видимости объекта определяет таймфреймы графика, на которых объект отображаем. </span></p> 
<p><span>Для установки/получения значения свойства OBJPROP_TIMEFRAMES можно использовать функции <a href="/objects/objectset">ObjectSet()</a>/<a href="/objects/objectget">ObjectGet()</a> или функции <a href="/objects/objectsetinteger">ObjectSetInteger()</a>/<a href="/objects/objectgetinteger">ObjectGetInteger()</a>.</span></p>
<div style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="5" border="1" style="border:solid 2px #b1c2d6; border-spacing:0px; border-collapse:collapse;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Константа</span></p> </td> 
    <td style="vertical-align:top; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Значение</span></p> </td> 
    <td style="vertical-align:top; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Описание</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_NO_PERIODS, EMPTY</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>-1</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект не показывается ни на одном таймфрейме</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_M1</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0001</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на 1-минутных графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_M5</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0002</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на 5-минутных графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_M15</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0004</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на 15-минутных графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_M30</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0008</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на 30-минутных графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_H1</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0010</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на 1-часовых графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_H4</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0020</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на 4-часовых графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_D1</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0040</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на дневных графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_W1</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0080</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на недельных графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_PERIOD_MN1</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x0100</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется только на месячных графиках</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>OBJ_ALL_PERIODS</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>0x01ff</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Объект рисуется на всех таймфреймах</span></p> </td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Флаги видимости можно комбинировать с помощью символа "|", например, комбинация флагов OBJ_PERIOD_M15|OBJ_PERIOD_H1 означает, что объект будет видим на 15-минутном и часовом таймфреймах.</span></p> 
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;highlevel=</span><span style="color: #008080;">"PreviousDayHigh"</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;lowlevel=</span><span style="color: #008080;">"PreviousDayLow"</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;prevHigh;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;High&nbsp;предыдущего&nbsp;дня</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;prevLow;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;Low&nbsp;предыдущего&nbsp;дня</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;highs[],lows[];&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;массивы&nbsp;для&nbsp;получения&nbsp;High&nbsp;и&nbsp;Low</span><br> <span style="color: #808080;">&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;сбросим&nbsp;значение&nbsp;последней&nbsp;ошибки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ResetLastError</span><span>();</span><br> <span style="color: #808080;">//---&nbsp;получим&nbsp;2&nbsp;последних&nbsp;значения&nbsp;High&nbsp;на&nbsp;дневном&nbsp;таймфрейме</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;highsgot=</span><span style="color: #0000ff;">CopyHigh</span><span>(</span><span style="color: #0000ff;">Symbol</span><span>(),</span><span style="color: #0000ff;">PERIOD_D1</span><span>,0,2,highs);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(highsgot&gt;0)&nbsp;</span><span style="color: #808080;">//&nbsp;если&nbsp;копирование&nbsp;прошло&nbsp;успешно</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Цены&nbsp;High&nbsp;за&nbsp;последние&nbsp;2&nbsp;дня&nbsp;получены&nbsp;успешно"</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevHigh=highs[0];&nbsp;</span><span style="color: #808080;">//&nbsp;High&nbsp;предыдущего&nbsp;дня</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"prevHigh&nbsp;=&nbsp;"</span><span>,prevHigh);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">ObjectFind</span><span>(0,highlevel)&lt;0)&nbsp;</span><span style="color: #808080;">//&nbsp;объект&nbsp;с&nbsp;именем&nbsp;highlevel&nbsp;не&nbsp;найден</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectCreate</span><span>(0,highlevel,</span><span style="color: #0000ff;">OBJ_HLINE</span><span>,0,0,0);&nbsp;</span><span style="color: #808080;">//&nbsp;создадим&nbsp;объект&nbsp;гор.&nbsp;линия</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;зададим&nbsp;ценовой&nbsp;уровень&nbsp;для&nbsp;линии&nbsp;highlevel</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetDouble</span><span>(0,highlevel,</span><span style="color: #0000ff;">OBJPROP_PRICE</span><span>,0,prevHigh);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;установим&nbsp;видимость&nbsp;только&nbsp;для&nbsp;&nbsp;PERIOD_M15&nbsp;и&nbsp;PERIOD_H1</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetInteger</span><span>(0,highlevel,</span><span style="color: #0000ff;">OBJPROP_TIMEFRAMES</span><span>,</span><span style="color: #0000ff;">OBJ_PERIOD_M15</span><span>|</span><span style="color: #0000ff;">OBJ_PERIOD_H1</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Не&nbsp;удалось&nbsp;получить&nbsp;цены&nbsp;High&nbsp;за&nbsp;последние&nbsp;2&nbsp;дня,&nbsp;Error&nbsp;=&nbsp;"</span><span>,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;сбросим&nbsp;значение&nbsp;последней&nbsp;ошибки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ResetLastError</span><span>();</span><br> <span style="color: #808080;">//---&nbsp;получим&nbsp;2&nbsp;последних&nbsp;значения&nbsp;Low&nbsp;на&nbsp;дневном&nbsp;таймфрейме</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;lowsgot=</span><span style="color: #0000ff;">CopyLow</span><span>(</span><span style="color: #0000ff;">Symbol</span><span>(),</span><span style="color: #0000ff;">PERIOD_D1</span><span>,0,2,lows);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(lowsgot&gt;0)&nbsp;</span><span style="color: #808080;">//&nbsp;если&nbsp;копирование&nbsp;прошло&nbsp;успешно</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Цены&nbsp;Low&nbsp;за&nbsp;последние&nbsp;2&nbsp;дня&nbsp;получены&nbsp;успешно"</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prevLow=lows[0];&nbsp;</span><span style="color: #808080;">//&nbsp;Low&nbsp;предыдущего&nbsp;дня</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"prevLow&nbsp;=&nbsp;"</span><span>,prevLow);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">ObjectFind</span><span>(0,lowlevel)&lt;0)&nbsp;</span><span style="color: #808080;">//&nbsp;объект&nbsp;с&nbsp;именем&nbsp;lowlevel&nbsp;не&nbsp;найден</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectCreate</span><span>(0,lowlevel,</span><span style="color: #0000ff;">OBJ_HLINE</span><span>,0,0,0);&nbsp;</span><span style="color: #808080;">//&nbsp;создадим&nbsp;объект&nbsp;гор.&nbsp;линия</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;зададим&nbsp;ценовой&nbsp;уровень&nbsp;для&nbsp;линии&nbsp;lowlevel</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetDouble</span><span>(0,lowlevel,</span><span style="color: #0000ff;">OBJPROP_PRICE</span><span>,0,prevLow);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;установим&nbsp;видимость&nbsp;только&nbsp;для&nbsp;&nbsp;PERIOD_M15&nbsp;и&nbsp;PERIOD_H1</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetInteger</span><span>(0,lowlevel,</span><span style="color: #0000ff;">OBJPROP_TIMEFRAMES</span><span>,</span><span style="color: #0000ff;">OBJ_PERIOD_M15</span><span>|</span><span style="color: #0000ff;">OBJ_PERIOD_H1</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><span>&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Не&nbsp;удалось&nbsp;получить&nbsp;цены&nbsp;Low&nbsp;за&nbsp;последние&nbsp;2&nbsp;дня,&nbsp;Error&nbsp;=&nbsp;"</span><span>,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartRedraw</span><span>(0);&nbsp;</span><span style="color: #808080;">//&nbsp;перерисуем&nbsp;график&nbsp;принудительно</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Смотри также</span></p> 
<p><span><a href="/common/periodseconds">PeriodSeconds</a>, <a href="/check/period">Period</a>, <a href="/constants/chartconstants/enum_timeframes">Периоды графиков</a>, <a href="/dateandtime">Дата и время</a></span></p>
<br>