<h1>TextOut</h1> 
<p><span>Выводит текст в пользовательский массив (буфер) и возвращает результат успешности этой операции. Данный массив предназначается для создания графического <a href="/common/resourcecreate">ресурса</a>.</span></p>
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>bool&nbsp;&nbsp;</span><span>TextOut</span><span>(</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>const&nbsp;string</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>text</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;выводимый&nbsp;текст</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>x</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;координатa&nbsp;X&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>y</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;координатa&nbsp;Y&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>uint&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>anchor</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;способ&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>uint&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>&amp;data[]</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;буфер&nbsp;для&nbsp;вывод</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>uint&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>width</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;ширина&nbsp;буфера&nbsp;в&nbsp;точках</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>uint&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>height</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;высота&nbsp;буфера&nbsp;в&nbsp;точках</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>uint&nbsp;&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>color</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;цвет&nbsp;текста</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>ENUM_COLOR_FORMAT&nbsp;&nbsp;&nbsp;</span><span>color_format</span><span>&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;формат&nbsp;цвета&nbsp;для&nbsp;вывода</span><br> <span>&nbsp;&nbsp;&nbsp;);</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Параметры</span></p> 
<p><span>text</span></p> 
<p><span>[in] &nbsp;Выводимый текст, который будет записан в буфер. Осуществляется только однострочный вывод текста.</span></p> 
<p><span>x</span></p> 
<p><span>[in] &nbsp;Координатa X точки привязки для выводимого текста.</span></p> 
<p><span>y</span></p> 
<p><span>[in] &nbsp;Координатa Y точки привязки для выводимого текста.</span></p> 
<p><span>anchor</span></p> 
<p><span>[in] &nbsp;Значение из набора 9 предопределенных способов расположения точки привязки &nbsp;выводимого текста. Задаётся комбинацией двух флагов – флага выравнивания текста по горизонтали и флага выравнивания текста по вертикали. Наименования флагов приведены в Примечании.</span></p> 
<p><span>data[]</span></p> 
<p><span>[in] &nbsp;Буфер, в который выводится текст. Данный буфер используется для создания графического <a href="/runtime/resources">ресурса</a>.</span></p>
<p><span>width</span></p> 
<p><span>[in] &nbsp;Ширина буфера в точках (пикселях).</span></p> 
<p><span>height</span></p> 
<p><span>[in] &nbsp;Высота буфера в точках (пикселях).</span></p> 
<p><span>color</span></p> 
<p><span>[in] &nbsp;Цвет текста.</span></p> 
<p><span>color_format</span></p> 
<p><span>[in] &nbsp;Формат цвета, задаётся значением из перечисления <a href="/common/resourcecreate#enum_color_format">ENUM_COLOR_FORMAT</a>.</span></p>
<p><span>Возвращаемое значение</span></p> 
<p><span>Возвращает true в случае успешного выполнения, иначе false.</span></p> 
<p><span>Примечание</span></p> 
<p><span>Способ привязки, задаваемый параметром </span><span>anchor</span><span>, является комбинацией двух флагов выравнивания текста по вертикали и горизонтали. Флаги выравнивания текста по горизонтали:</span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 1px 17px 1px 30px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>TA_LEFT – точка привязки на левой стороне ограничивающего прямоугольника</span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 1px 17px 1px 30px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>TA_CENTER – точка привязки по горизонтали находится в середине ограничивающего прямоугольника</span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 1px 17px 1px 30px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>TA_RIGHT – точка привязки на правой стороне ограничивающего прямоугольника</span></p> 
<p><span>Флаги выравнивания текста по вертикали:</span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 1px 17px 1px 30px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>TA_TOP – точка привязки на верхней стороне ограничивающего прямоугольника</span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 1px 17px 1px 30px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>TA_VCENTER – точка привязки по вертикали находится в середине ограничивающего прямоугольника</span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 1px 17px 1px 30px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>TA_BOTTOM – точка привязки на нижней стороне ограничивающего прямоугольника</span></p> 
<p><span>&nbsp;</span></p> 
<p><span>Возможные комбинации флагов и задаваемые ими способы привязки показаны на рисунке.</span><br> <span>&nbsp;</span></p> 
<p style="text-align: left;"><img alt="9 возможных способов привязки текстовой строки" title="9 возможных способов привязки текстовой строки" width="451" height="168" style="margin:0;width:451px;height:168px;border:none" src="https://c.mql4.com/i/docs/ru/align_text.png"></p> 
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">#property&nbsp;strict</span><br> <span style="color: #808080;">//---&nbsp;ширина&nbsp;и&nbsp;высота&nbsp;канваса&nbsp;(холста,&nbsp;на&nbsp;котором&nbsp;происходит&nbsp;рисование)</span><br> <span style="color: #0000ff;">#define</span><span>&nbsp;IMG_WIDTH&nbsp;&nbsp;200</span><br> <span style="color: #0000ff;">#define</span><span>&nbsp;IMG_HEIGHT&nbsp;200</span><br> <span style="color: #808080;">//---&nbsp;перед&nbsp;запуском&nbsp;скрипта&nbsp;покажем&nbsp;окно&nbsp;с&nbsp;параметрами</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">script_show_inputs</span><br> <span style="color: #808080;">//---&nbsp;дадим&nbsp;возможность&nbsp;задавать&nbsp;формат&nbsp;цвета</span><br> <span style="color: #0000ff;">input</span><span>&nbsp;</span><span style="color: #0000ff;">ENUM_COLOR_FORMAT</span><span>&nbsp;</span><span style="color: #800000;">clr_format</span><span>=</span><span style="color: #0000ff;">COLOR_FORMAT_XRGB_NOALPHA</span><span>;</span><br> <span style="color: #808080;">//---&nbsp;массив&nbsp;(буфер)&nbsp;для&nbsp;отрисовки&nbsp;</span><br> <span style="color: #0000ff;">uint</span><span>&nbsp;ExtImg[IMG_WIDTH*IMG_HEIGHT];</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;создадим&nbsp;объект&nbsp;OBJ_BITMAP_LABEL&nbsp;для&nbsp;рисования&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectCreate</span><span>(0,</span><span style="color: #008080;">"CLOCK"</span><span>,</span><span style="color: #0000ff;">OBJ_BITMAP_LABEL</span><span>,0,0,0);</span><br> <span style="color: #808080;">//---&nbsp;укажем&nbsp;имя&nbsp;графического&nbsp;ресурса&nbsp;для&nbsp;отрисовки&nbsp;в&nbsp;объекте&nbsp;CLOCK</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetString</span><span>(0,</span><span style="color: #008080;">"CLOCK"</span><span>,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,</span><span style="color: #008080;">"::IMG"</span><span>);</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;вспомогательные&nbsp;переменные</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;a;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;угол&nbsp;стрелки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">uint</span><span>&nbsp;&nbsp;&nbsp;nm=2700;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;счетчик&nbsp;минут</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">uint</span><span>&nbsp;&nbsp;&nbsp;nh=2700*12;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;счетчик&nbsp;часов</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">uint</span><span>&nbsp;&nbsp;&nbsp;w,h;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;переменные&nbsp;для&nbsp;получения&nbsp;размеров&nbsp;текстовых&nbsp;строк&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;x,y;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;переменные&nbsp;для&nbsp;расчета&nbsp;текущих&nbsp;координат&nbsp;точки&nbsp;привязки&nbsp;текстовых&nbsp;строк</span><br> <span style="color: #808080;">&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;крутим&nbsp;стрелки&nbsp;часов&nbsp;в&nbsp;бесконечном&nbsp;цикле,&nbsp;пока&nbsp;скрипт&nbsp;не&nbsp;остановят</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">while</span><span>(!</span><span style="color: #0000ff;">IsStopped</span><span>())</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;очистка&nbsp;массива&nbsp;буфера&nbsp;рисования&nbsp;часов</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArrayFill</span><span>(ExtImg,0,IMG_WIDTH*IMG_HEIGHT,0);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;установка&nbsp;шрифта&nbsp;для&nbsp;отрисовки&nbsp;цифр&nbsp;на&nbsp;циферблате</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextSetFont</span><span>(</span><span style="color: #008080;">"Arial"</span><span>,-200,</span><span style="color: #0000ff;">FW_EXTRABOLD</span><span>,0);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;рисуем&nbsp;циферблат</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(</span><span style="color: #0000ff;">int</span><span>&nbsp;i=1;i&lt;=12;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;получим&nbsp;размеры&nbsp;текущего&nbsp;часа&nbsp;на&nbsp;циферблате</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextGetSize</span><span>(</span><span style="color: #0000ff;">string</span><span>(i),w,h);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;вычислим&nbsp;координаты&nbsp;текущего&nbsp;часа&nbsp;на&nbsp;циферблате</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a=-((i*300)%3600*</span><span style="color: #0000ff;">M_PI</span><span>)/1800.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x=IMG_WIDTH/2-</span><span style="color: #0000ff;">int</span><span>(</span><span style="color: #0000ff;">sin</span><span>(a)*80+0.5+w/2);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y=IMG_HEIGHT/2-</span><span style="color: #0000ff;">int</span><span>(</span><span style="color: #0000ff;">cos</span><span>(a)*80+0.5+h/2);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;вывод&nbsp;этого&nbsp;часа&nbsp;на&nbsp;циферблат&nbsp;в&nbsp;буфер&nbsp;ExtImg[]</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextOut</span><span>(</span><span style="color: #0000ff;">string</span><span>(i),x,y,</span><span style="color: #0000ff;">TA_LEFT</span><span>|</span><span style="color: #0000ff;">TA_TOP</span><span>,ExtImg,IMG_WIDTH,IMG_HEIGHT,0xFFFFFFFF,</span><span style="color: #800000;">clr_format</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;теперь&nbsp;установим&nbsp;шрифт&nbsp;для&nbsp;отрисовки&nbsp;минутной&nbsp;стрелки&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextSetFont</span><span>(</span><span style="color: #008080;">"Arial"</span><span>,-200,</span><span style="color: #0000ff;">FW_EXTRABOLD</span><span>,-</span><span style="color: #0000ff;">int</span><span>(nm%3600));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;получим&nbsp;размеры&nbsp;минутной&nbsp;стрелки</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextGetSize</span><span>(</span><span style="color: #008080;">"-----&gt;"</span><span>,w,h);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;вычислим&nbsp;координаты&nbsp;минутной&nbsp;стрелки&nbsp;на&nbsp;циферблате</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a=-(nm%3600*</span><span style="color: #0000ff;">M_PI</span><span>)/1800.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x=IMG_WIDTH/2-</span><span style="color: #0000ff;">int</span><span>(</span><span style="color: #0000ff;">sin</span><span>(a)*h/2+0.5);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y=IMG_HEIGHT/2-</span><span style="color: #0000ff;">int</span><span>(</span><span style="color: #0000ff;">cos</span><span>(a)*h/2+0.5);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;вывод&nbsp;минутной&nbsp;стрелки&nbsp;на&nbsp;циферблат&nbsp;в&nbsp;буфер&nbsp;ExtImg[]</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextOut</span><span>(</span><span style="color: #008080;">"-----&gt;"</span><span>,x,y,</span><span style="color: #0000ff;">TA_LEFT</span><span>|</span><span style="color: #0000ff;">TA_TOP</span><span>,ExtImg,IMG_WIDTH,IMG_HEIGHT,0xFFFFFFFF,</span><span style="color: #800000;">clr_format</span><span>);</span><br> <span>&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;теперь&nbsp;установим&nbsp;шрифт&nbsp;для&nbsp;отрисовки&nbsp;часовой&nbsp;стрелки&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextSetFont</span><span>(</span><span style="color: #008080;">"Arial"</span><span>,-200,</span><span style="color: #0000ff;">FW_EXTRABOLD</span><span>,-</span><span style="color: #0000ff;">int</span><span>(nh/12%3600));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextGetSize</span><span>(</span><span style="color: #008080;">"==&gt;"</span><span>,w,h);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;вычислим&nbsp;координаты&nbsp;часовой&nbsp;стрелки&nbsp;на&nbsp;циферблате</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;a=-(nh/12%3600*</span><span style="color: #0000ff;">M_PI</span><span>)/1800.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;x=IMG_WIDTH/2-</span><span style="color: #0000ff;">int</span><span>(</span><span style="color: #0000ff;">sin</span><span>(a)*h/2+0.5);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;y=IMG_HEIGHT/2-</span><span style="color: #0000ff;">int</span><span>(</span><span style="color: #0000ff;">cos</span><span>(a)*h/2+0.5);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;вывод&nbsp;часовой&nbsp;стрелки&nbsp;на&nbsp;циферблат&nbsp;в&nbsp;буфер&nbsp;ExtImg[]</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TextOut</span><span>(</span><span style="color: #008080;">"==&gt;"</span><span>,x,y,</span><span style="color: #0000ff;">TA_LEFT</span><span>|</span><span style="color: #0000ff;">TA_TOP</span><span>,ExtImg,IMG_WIDTH,IMG_HEIGHT,0xFFFFFFFF,</span><span style="color: #800000;">clr_format</span><span>);</span><br> <span>&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;обновление&nbsp;графического&nbsp;ресурса</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ResourceCreate</span><span>(</span><span style="color: #008080;">"::IMG"</span><span>,ExtImg,IMG_WIDTH,IMG_HEIGHT,0,0,IMG_WIDTH,</span><span style="color: #800000;">clr_format</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;принудительное&nbsp;обновление&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartRedraw</span><span>();</span><br> <span>&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;увеличим&nbsp;счетчики&nbsp;часа&nbsp;и&nbsp;минут</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nm+=60;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nh+=60;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;выдержим&nbsp;небольшую&nbsp;паузу&nbsp;между&nbsp;кадрами</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Sleep</span><span>(10);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---&nbsp;удалим&nbsp;объект&nbsp;CLOCK&nbsp;при&nbsp;завершении&nbsp;работы&nbsp;скрипта</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectDelete</span><span>(0,</span><span style="color: #008080;">"CLOCK"</span><span>);</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Смотри также</span></p> 
<p><span><a href="/runtime/resources">Ресурсы</a>, <a href="/common/resourcecreate">ResourceCreate()</a>, <a href="/common/resourcesave">ResourceSave()</a>, <a href="/objects/textgetsize">TextGetSize()</a>, <a href="/objects/textsetfont">TextSetFont()</a></span></p>
<br>