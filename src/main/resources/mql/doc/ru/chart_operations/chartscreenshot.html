<h1>ChartScreenShot</h1> 
<p><span>Сохраняет изображение текущего графика в файле формата GIF, PNG или BMP в зависимости от указанного расширения. Отданная команда поступает в очередь сообщений графика и выполняется только после обработки всех предыдущих команд.</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>bool&nbsp;&nbsp;</span><span>ChartScreenShot</span><span>(</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>long</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>chart_id</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;идентификатор&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>string</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>filename</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;имя&nbsp;файла</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>width</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;ширина</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>height</span><span>,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;высота</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>ENUM_ALIGN_MODE</span><span>&nbsp;&nbsp;</span><span>align_mode=ALIGN_RIGHT</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;тип&nbsp;выравнивания</span><br> <span>&nbsp;&nbsp;&nbsp;);</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Параметры</span></p> 
<p><span>chart_id</span></p> 
<p><span>[in] &nbsp;Идентификатор графика. 0 означает текущий график.</span></p> 
<p><span>filename</span></p> 
<p><span>[in] &nbsp;Имя файла скриншота. Не может превышать 63 символов. Скриншот помещается в директорию \Files.</span></p> 
<p><span>width</span></p> 
<p><span>[in] &nbsp;Ширина скриншота в пикселях</span></p> 
<p><span>height</span></p> 
<p><span>[in] &nbsp;Высота скриншота в пикселях</span></p> 
<p><span>align_mode=ALIGN_RIGHT</span></p> 
<p><span>[in] &nbsp;Режим вывода узкого скриншота. Значение перечисления <a href="/constants/objectconstants/enum_object_property#enum_align_mode">ENUM_ALIGN_MODE</a>. ALIGN_RIGHT означает выравнивание по правой границе (вывод с конца). ALIGN_LEFT задает выравнивание по левой границе.</span></p>
<p><span>Возвращаемое значение</span></p> 
<p><span>Возвращает true в случае удачного помещения команды в очередь графика, иначе false. Чтобы получить информацию об <a href="/constants/errorswarnings/errorcodes">ошибке</a>, необходимо вызвать функцию <a href="/check/getlasterror">GetLastError()</a>.</span></p>
<p><span>Примечание</span></p> 
<p><span>Если необходимо снять скриншот графика с определенной позиции, то необходимо сначала позиционировать график при помощи функции <a href="/chart_operations/chartnavigate">ChartNavigate()</a>. Если горизонтальный размер скриншота меньше, чем окно графика, то выводится либо правая часть окна графика, либо левая часть, в зависимости от значения параметра align_mode.</span></p>
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">description</span><span>&nbsp;</span><span style="color: #008080;">"Советник&nbsp;демонстрирует&nbsp;создание&nbsp;серии&nbsp;скриншотов&nbsp;текущего&nbsp;графика"</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">description</span><span>&nbsp;</span><span style="color: #008080;">"с&nbsp;помощью&nbsp;функции&nbsp;ChartScreenShot().&nbsp;Имя&nbsp;файла&nbsp;для&nbsp;удобства&nbsp;также"</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">description</span><span>&nbsp;</span><span style="color: #008080;">"выводится&nbsp;на&nbsp;график.&nbsp;Высота&nbsp;и&nbsp;ширина&nbsp;рисунков&nbsp;задается&nbsp;макросами."</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">#define</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WIDTH&nbsp;&nbsp;800&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//&nbsp;ширина&nbsp;рисунка&nbsp;для&nbsp;вызова&nbsp;&nbsp;ChartScreenShot()</span><br> <span style="color: #0000ff;">#define</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HEIGHT&nbsp;600&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//&nbsp;высота&nbsp;рисунка&nbsp;для&nbsp;вызова&nbsp;&nbsp;ChartScreenShot()</span><br> <span>&nbsp;</span><br> <span style="color: #999999;">//---&nbsp;input&nbsp;parameters</span><br> <span style="color: #0000ff;">input</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #c0504d;">pictures</span><span>=5;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//&nbsp;количество&nbsp;рисунков&nbsp;в&nbsp;серии</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode=-1;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//&nbsp;-1&nbsp;означает&nbsp;смещение&nbsp;к&nbsp;правому&nbsp;краю&nbsp;графика,&nbsp;1&nbsp;-&nbsp;к&nbsp;левому</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bars_shift=300;</span><span style="color: #999999;">//&nbsp;количество&nbsp;баров&nbsp;при&nbsp;прокрутке&nbsp;графика&nbsp;функцией&nbsp;ChartNavigate()</span><br> <span style="color: #999999;">//+------------------------------------------------------------------+</span><br> <span style="color: #999999;">//|&nbsp;Expert&nbsp;initialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #999999;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnInit</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #999999;">//---&nbsp;отключим&nbsp;автопрокрутку&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartSetInteger</span><span>(0,</span><span style="color: #0000ff;">CHART_AUTOSCROLL</span><span>,</span><span style="color: #0000ff;">false</span><span>);</span><br> <span style="color: #999999;">//---&nbsp;установим&nbsp;отступ&nbsp;правого&nbsp;края&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartSetInteger</span><span>(0,</span><span style="color: #0000ff;">CHART_SHIFT</span><span>,</span><span style="color: #0000ff;">true</span><span>);</span><br> <span style="color: #999999;">//---&nbsp;установим&nbsp;отображение&nbsp;графика&nbsp;в&nbsp;виде&nbsp;свечей</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartSetInteger</span><span>(0,</span><span style="color: #0000ff;">CHART_MODE</span><span>,</span><span style="color: #0000ff;">CHART_CANDLES</span><span>);</span><br> <span style="color: #999999;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Подготовка&nbsp;советника&nbsp;к&nbsp;работе&nbsp;завершена"</span><span>);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #999999;">//+------------------------------------------------------------------+</span><br> <span style="color: #999999;">//|&nbsp;Expert&nbsp;tick&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #999999;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnTick</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #999999;">//---</span><br> <span>&nbsp;</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #999999;">//+------------------------------------------------------------------+</span><br> <span style="color: #999999;">//|&nbsp;ChartEvent&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #999999;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnChartEvent</span><span>(</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;id,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">long</span><span>&nbsp;&amp;lparam,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;dparam,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;&amp;sparam)</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #999999;">//---&nbsp;вывод&nbsp;имени&nbsp;функции,&nbsp;времени&nbsp;вызова&nbsp;и&nbsp;идентификатора&nbsp;события</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #0000ff;">__FUNCTION__</span><span>,TimeCurrent(),</span><span style="color: #008080;">"&nbsp;&nbsp;&nbsp;id="</span><span>,id,</span><span style="color: #008080;">"&nbsp;&nbsp;&nbsp;mode="</span><span>,mode);</span><br> <span style="color: #999999;">//---&nbsp;обработка&nbsp;события&nbsp;CHARTEVENT_CLICK&nbsp;("Нажатие&nbsp;кнопки&nbsp;мышки&nbsp;на&nbsp;графике")</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(id==</span><span style="color: #0000ff;">CHARTEVENT_CLICK</span><span>)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;начальное&nbsp;смещение&nbsp;от&nbsp;края&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;pos=0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;режим&nbsp;работы&nbsp;с&nbsp;левым&nbsp;краем&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(mode&gt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;прокрутим&nbsp;график&nbsp;к&nbsp;левому&nbsp;краю</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartNavigate</span><span>(0,</span><span style="color: #0000ff;">CHART_BEGIN</span><span>,pos);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(</span><span style="color: #0000ff;">int</span><span>&nbsp;i=0;i&lt;</span><span style="color: #c0504d;">pictures</span><span>;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;подготовим&nbsp;подпись&nbsp;на&nbsp;графике&nbsp;и&nbsp;имя&nbsp;для&nbsp;файла</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;name=</span><span style="color: #008080;">"ChartScreenShot"</span><span>+</span><span style="color: #008080;">"CHART_BEGIN"</span><span>+</span><span style="color: #0000ff;">string</span><span>(pos)+</span><span style="color: #008080;">".gif"</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;вывод&nbsp;имени&nbsp;на&nbsp;график&nbsp;в&nbsp;виде&nbsp;комментария</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Comment</span><span>(name);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;сохраним&nbsp;скриншот&nbsp;графика&nbsp;в&nbsp;папку&nbsp;каталог_терминала\MQL4\Files\</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">ChartScreenShot</span><span>(0,name,WIDTH,HEIGHT,</span><span style="color: #0000ff;">ALIGN_LEFT</span><span>))</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Сохранили&nbsp;скриншот&nbsp;"</span><span>,name);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos+=bars_shift;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;дадим&nbsp;пользователю&nbsp;время&nbsp;чтобы&nbsp;посмотреть&nbsp;на&nbsp;новый&nbsp;участок&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Sleep</span><span>(3000);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;прокрутим&nbsp;график&nbsp;от&nbsp;текущей&nbsp;позиции&nbsp;на&nbsp;bars_shift&nbsp;вправо</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartNavigate</span><span>(0,</span><span style="color: #0000ff;">CHART_CURRENT_POS</span><span>,bars_shift);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;смена&nbsp;режима&nbsp;на&nbsp;противоположный</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode*=-1;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><span>&nbsp;</span><span style="color: #999999;">//&nbsp;режим&nbsp;работы&nbsp;с&nbsp;правым&nbsp;краем&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;прокрутим&nbsp;график&nbsp;к&nbsp;правому&nbsp;краю</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartNavigate</span><span>(0,</span><span style="color: #0000ff;">CHART_END</span><span>,pos);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(</span><span style="color: #0000ff;">int</span><span>&nbsp;i=0;i&lt;pictures;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;подготовим&nbsp;подпись&nbsp;на&nbsp;графике&nbsp;и&nbsp;имя&nbsp;для&nbsp;файла</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;name=</span><span style="color: #008080;">"ChartScreenShot"</span><span>+</span><span style="color: #008080;">"CHART_END"</span><span>+</span><span style="color: #0000ff;">string</span><span>(pos)+</span><span style="color: #008080;">".gif"</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;вывод&nbsp;имени&nbsp;на&nbsp;график&nbsp;в&nbsp;виде&nbsp;комментария</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Comment</span><span>(name);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;сохраним&nbsp;скриншот&nbsp;графика&nbsp;в&nbsp;папку&nbsp;каталог_терминала\MQL4\Files\</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">ChartScreenShot</span><span>(0,name,WIDTH,HEIGHT,</span><span style="color: #0000ff;">ALIGN_RIGHT</span><span>))</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Сохранили&nbsp;скриншот&nbsp;"</span><span>,name);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos+=bars_shift;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;дадим&nbsp;пользователю&nbsp;время&nbsp;чтобы&nbsp;посмотреть&nbsp;на&nbsp;новый&nbsp;участок&nbsp;графика</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Sleep</span><span>(3000);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;прокрутим&nbsp;график&nbsp;от&nbsp;текущей&nbsp;позиции&nbsp;на&nbsp;bars_shift&nbsp;вправо</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartNavigate</span><span>(0,</span><span style="color: #0000ff;">CHART_CURRENT_POS</span><span>,-bars_shift);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #999999;">//---&nbsp;смена&nbsp;режима&nbsp;на&nbsp;противоположный</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mode*=-1;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;&nbsp;</span><span style="color: #999999;">//&nbsp;конец&nbsp;обработки&nbsp;события&nbsp;CHARTEVENT_CLICK</span><br> <span style="color: #999999;">//---&nbsp;конец&nbsp;обработчика&nbsp;OnChartEvent()&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Смотри также</span></p> 
<p><span><a href="/chart_operations/chartnavigate">ChartNavigate()</a>, <a href="/runtime/resources">Ресурсы</a></span></p>
<br>