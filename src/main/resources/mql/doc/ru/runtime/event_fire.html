<h1>События клиентского терминала</h1> 
<h2><a id="init"></a>Init</h2> 
<p><span>Сразу же после того, как клиентский терминал загрузит программу (эксперт или пользовательский индикатор) и запустит процесс инициализации глобальных переменных, будет послано событие Init, которое обрабатывается функцией <a href="/basis/function/events#oninit">OnInit()</a>, если она есть. Это событие также генерируется после смены финансового инструмента и/или периода графика, после перекомпиляции программы в редакторе MetaEditor, после смены входных параметров из окна настройки эксперта или пользовательского индикатора. Советник также инициализируется после смены счета.</span></p>
<h2><a id="deinit"></a>Deinit</h2> 
<p><span>Перед деинициализацией глобальных переменных и выгрузкой программы (эксперт или пользовательский индикатор) клиентский терминал посылает программе событие </span><span style="color: #0000ff;">Deinit</span><span>. Событие Deinit также генерируется при завершении работы клиентского терминала, при закрытии графика, непосредственно перед сменой финансового инструмента и/или периода графика, при удачной перекомпиляции программы, при смене входных параметров, а также при смене счета. </span></p> 
<p><span><a href="/constants/namedconstants/uninit">Причину&nbsp;деинициализации</a> можно получить из параметра, переданного в функцию <a href="/basis/function/events#ondeinit">OnDeinit()</a>. Выполнение функции OnDeinit() ограничивается 2.5 секундами. Если за это время функция не закончила свою работу, то ее выполнение завершается принудительно.</span></p>
<h2><a id="start"></a>Start</h2> 
<p><span>Событие </span><span style="color: #0000ff;">Start</span><span> – это специальное событие для активизации скрипта после его загрузки. Это событие обрабатывается функцией <a href="/basis/function/events#onstart">OnStart</a>. Событие Start экспертам и пользовательским индикаторам не посылается.</span></p>
<h2><a id="newtick"></a>NewTick</h2> 
<p><span>Событие </span><span style="color: #0000ff;">NewTick</span><span> генерируется при поступлении новых котировок и обрабатывается функцией <a href="/basis/function/events#ontick">OnTick()</a> у присоединенных советников. Если при поступлении новой котировки выполнялась функция OnTick, запущенная на предыдущей котировке, то пришедшая котировка будет проигнорирована советником, так как соответствующее событие не будет поставлено в очередь событий эксперта. </span></p>
<p><span>Все пришедшие во время выполнения программы новые котировки программой игнорируются до тех пор, пока не завершится очередное выполнение функции OnTick(). После этого функция будет запущена только после прихода очередной новой котировки. </span></p> 
<p><span>Событие NewTick генерируется независимо от того, запрещена или разрешена автоматическая торговля (кнопка "Разрешить/запретить Авто-торговлю"). Запрет автоматической торговли означает только запрет на отправку торговых запросов из эксперта, работа эксперта не прекращается.</span></p> 
<p><span>Запрет автоматической торговли путем нажатия на указанную кнопку не прерывает текущее выполнение функции OnTick().</span></p> 
<h2><a id="calculate"></a>Calculate</h2> 
<p><span>Событие </span><span style="color: #0000ff;">Calculate</span><span> генерируется только для индикаторов сразу после посылки события Init и при любом изменении ценовых данных. Обрабатывается функцией <a href="/basis/function/events#oncalculate">OnCalculate</a>.</span></p>
<h2><a id="timer"></a>Timer</h2> 
<p><span>Событие </span><span style="color: #0000ff;">Timer</span><span> периодически генерируется клиентским терминалом для эксперта, который активизировал таймер при помощи функции <a href="/eventfunctions/eventsettimer">EventSetTimer</a>. Обычно эта функция вызывается в функции OnInit. Обработка события Timer производится функцией <a href="/basis/function/events#ontimer">OnTimer</a>. При завершении работы эксперта необходимо уничтожить созданный таймер при помощи <a href="/eventfunctions/eventkilltimer">EventKillTimer</a>, которую обычно вызывают в функции OnDeinit.</span></p>
<h2><a id="tester"></a>Tester</h2> 
<p><span>Событие </span><span style="color: #0000ff;">Tester</span><span> генерируется по окончании тестирования эксперта на исторических данных. Обработка события &nbsp;Tester производится функцией </span><span style="color: #0000ff;"><a href="/basis/function/events#ontester">OnTester()</a></span><span>.</span></p>
<h2><a id="chartevent"></a>ChartEvent</h2> 
<p><span>Событие </span><span style="color: #0000ff;">ChartEvent</span><span> <a href="/constants/chartconstants/enum_chartevents">генерируется клиентским терминалом</a> при работе пользователя с графиком:</span></p>
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 2px 17px 3px 17px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>нажатия клавиатуры, когда окно графика находится в фокусе; </span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 2px 17px 3px 17px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>создание <a href="/constants/objectconstants/enum_object">графического объекта</a>;</span></p>
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 2px 17px 3px 17px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>удаление <a href="/constants/objectconstants/enum_object">графического объекта</a>;</span></p>
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 2px 17px 3px 17px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>щелчок мыши на графическом объекте, принадлежащего графику; </span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 2px 17px 3px 17px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>перемещение графического объекта при помощи мыши; </span></p> 
<p style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 13px; margin: 2px 17px 3px 17px;"><span style="display:inline-block;width:13px;margin-left:-13px;font-size:10pt;font-family:'Symbol';font-style:normal;color:#565656;text-decoration:none;">•</span><span>окончание редактирования текста в поле ввода графического объекта LabelEdit.</span></p> 
<p><span>Также существует пользовательское событие ChartEvent, которое может послать эксперту любая mql4-программа при помощи функции <a href="/eventfunctions/eventchartcustom">EventChartCustom</a>. Событие обрабатывается &nbsp;функцией <a href="/basis/function/events#onchartevent">OnChartEvent</a>.</span></p>
<p><span>Смотри также</span></p> 
<p><span><a href="/basis/function/events">Функции обработки событий</a>, <a href="/runtime/running">Выполнение программ</a></span></p>
<p><span>&nbsp;</span></p> 
<br>