<h1>Передача параметров</h1> 
<p><span>Существует два метода, с помощью которых машинный язык может передавать аргумент подпрограмме (функции). Первый способ – передача параметра по значению. Этот метод копирует значение <a href="/basis/function/call#argument">аргумента</a> в формальный параметр функции. Поэтому любые изменения этого параметра внутри функции не имеют никакого влияния на соответствующий аргумент вызова.</span></p>
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;передача&nbsp;параметров&nbsp;по&nbsp;значению&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">double</span><span>&nbsp;FirstMethod(</span><span style="color: #0000ff;">int</span><span>&nbsp;i,</span><span style="color: #0000ff;">int</span><span>&nbsp;j)</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;res;</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;i*=2;</span><br> <span>&nbsp;&nbsp;&nbsp;j/=2;</span><br> <span>&nbsp;&nbsp;&nbsp;res=i+j;</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(res);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;a=14,b=8;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"a&nbsp;и&nbsp;b&nbsp;перед&nbsp;вызовом:"</span><span>,a,"&nbsp;",b);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;d=FirstMethod(a,b);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"a&nbsp;и&nbsp;b&nbsp;после&nbsp;вызова:"</span><span>,a,"&nbsp;",b);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---&nbsp;результат&nbsp;выполнения&nbsp;скрипта</span><br> <span style="color: #808080;">//&nbsp;&nbsp;a&nbsp;и&nbsp;b&nbsp;перед&nbsp;вызовом:&nbsp;14&nbsp;8</span><br> <span style="color: #808080;">//&nbsp;&nbsp;a&nbsp;и&nbsp;b&nbsp;после&nbsp;вызова:&nbsp;14&nbsp;8</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Второй способ – передача аргумента по ссылке. В этом случае ссылка на параметр (а не его значение) передается параметру функции. Внутри функции она используется для того, чтобы обратиться к фактическому параметру, указанному в вызове. Это означает, что изменения параметра будут влиять на аргумент, использованный для вызова функции.</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;передача&nbsp;параметров&nbsp;по&nbsp;ссылке&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">double</span><span>&nbsp;SecondMethod(</span><span style="color: #0000ff;">int</span><span>&nbsp;&amp;i,</span><span style="color: #0000ff;">int</span><span>&nbsp;&amp;j)</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;res;</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;i*=2;</span><br> <span>&nbsp;&nbsp;&nbsp;j/=2;</span><br> <span>&nbsp;&nbsp;&nbsp;res=i+j;</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(res);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;a=14,b=8;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"a&nbsp;и&nbsp;b&nbsp;перед&nbsp;вызовом:"</span><span>,a,"&nbsp;",b);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;d=SecondMethod(a,b);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"a&nbsp;и&nbsp;b&nbsp;после&nbsp;вызова:"</span><span>,a,"&nbsp;",b);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//---&nbsp;результат&nbsp;выполнения&nbsp;скрипта</span><br> <span style="color: #808080;">//&nbsp;&nbsp;a&nbsp;и&nbsp;b&nbsp;перед&nbsp;вызовом:&nbsp;14&nbsp;8</span><br> <span style="color: #808080;">//&nbsp;&nbsp;a&nbsp;и&nbsp;b&nbsp;после&nbsp;вызова:&nbsp;28&nbsp;4</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>MQL4 использует оба метода, за одним исключением: массивы, переменные типа структур и объекты классов всегда передаются по ссылке. Для того чтобы исключить изменения фактических параметров (аргументов, переданных при вызове функции) необходимо использовать спецификатор доступа </span><span><a href="/basis/variables#const">const</a></span><span>. При попытке изменить содержимое переменной, объявленной со спецификатором </span><span style="font-style: italic;">const</span><span>, компилятор выдаст ошибку. </span></p>
<h3>Примечание</h3> 
<p><span>Необходимо помнить, что параметры передаются в функцию задом наперед, то есть сначала вычисляется и передается самый последний параметр, затем предпоследний и так далее. Последним по очереди вычисляется и передается параметр, стоящий первым после открывающей скобки.</span></p> 
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;a[]={0,1,2};</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;i=0;</span><br> <span>&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;func(a[i],a[i++],</span><span style="color: #008080;">"Первый&nbsp;вызов&nbsp;(i&nbsp;=&nbsp;"</span><span>+</span><span style="color: #0000ff;">string</span><span>(i)+</span><span style="color: #008080;">")"</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;func(a[i++],a[i],</span><span style="color: #008080;">"Второй&nbsp;вызов&nbsp;(i&nbsp;=&nbsp;"</span><span>+</span><span style="color: #0000ff;">string</span><span>(i)+</span><span style="color: #008080;">")"</span><span>);</span><br> <span style="color: #808080;">//&nbsp;Результат:</span><br> <span style="color: #808080;">//&nbsp;Первый&nbsp;вызов(i=0)&nbsp;:&nbsp;par1&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;par2&nbsp;=&nbsp;0</span><br> <span style="color: #808080;">//&nbsp;Второй&nbsp;вызов(i=1)&nbsp;:&nbsp;par1&nbsp;=&nbsp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;par2&nbsp;=&nbsp;1</span><br> <span style="color: #808080;">&nbsp;</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;func(</span><span style="color: #0000ff;">int</span><span>&nbsp;par1,</span><span style="color: #0000ff;">int</span><span>&nbsp;par2,</span><span style="color: #0000ff;">string</span><span>&nbsp;</span><span style="color: #0000ff;">comment</span><span>)</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #0000ff;">comment</span><span>,</span><span style="color: #008080;">":&nbsp;par1&nbsp;=&nbsp;"</span><span>,par1,</span><span style="color: #008080;">"&nbsp;&nbsp;&nbsp;&nbsp;par2&nbsp;=&nbsp;"</span><span>,par2);</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>При первом вызове в приведенном примере сначала переменная </span><span style="font-style: italic; font-weight: bold;">i</span><span> участвует в конкатенации строк:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>&nbsp;&nbsp;</span><span style="color: #008080;">"Первый&nbsp;вызов&nbsp;(i&nbsp;=&nbsp;"</span><span>+</span><span style="color: #0000ff;">string</span><span>(i)+</span><span style="color: #008080;">")"</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>При этом ее значение не меняется. Затем переменная </span><span style="font-weight: bold;">i</span><span> участвует в вычислении элемента массива </span><span style="font-style: italic; font-weight: bold;">a[i++]</span><span>, то есть после взятия i-го элемента массива переменная </span><span style="font-style: italic; font-weight: bold;">i</span><span> <a href="/basis/operations/mathoperation#posfix">инкрементируется</a>. И только после этого вычисляется первый параметр с измененным значением переменной </span><span style="font-style: italic; font-weight: bold;">i</span><span>.</span></p>
<p><span>Во втором вызове при вычислении всех трех параметров используется одно и тоже значение i, измененное на первом вызове функции, и только после вычисления первого параметра переменная </span><span style="font-style: italic; font-weight: bold;">i</span><span> опять изменяется.</span></p> 
<p><span>Смотри также</span></p> 
<p><span><a href="/basis/variables/variable_scope">Область видимости и время жизни переменных</a>, <a href="/basis/oop/overload">Перегрузка</a>, <a href="/basis/oop/virtual">Виртуальные функции</a>, <a href="/basis/oop/polymorphism">Полиморфизм</a></span></p>
<br>