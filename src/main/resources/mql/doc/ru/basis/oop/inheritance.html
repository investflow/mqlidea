<h1>Наследование</h1> 
<p><span>Особенностью ООП является поощрение повторного использования кода при помощи механизма наследования. Новый класс производится от существующего, называемого базовым классом. Производный класс использует члены базового класса, но может также изменять и дополнять их.</span></p> 
<p><span>Многие типы представляют собой вариации на темы существующих. Часто бывает утомительно разрабатывать новый код для каждого из них. Кроме того, новый код – новые ошибки. Производный класс наследует описание базового класса, делая ненужными повторную разработку и тестирование кода. Отношения наследования иерархичны.</span></p> 
<p><span>Иерархия - это метод, позволяющий копировать элементы во всем их многообразии и сложности. Она вводит классификацию объектов. Например, в периодической системе элементов есть газы. Они обладают свойствами, присущими всем элементам системы.</span></p> 
<p><span>Инертные газы – следующий важный подкласс. Иерархия заключается в том, что инертный газ, например, аргон – это газ, а газ, в свою очередь является элементом системы. Такая иерархия позволяет легко толковать поведение инертных газов. Мы знаем, что их атомы содержат протоны и электроны, что верно и для прочих элементов. </span></p> 
<p><span>Мы знаем, что они пребывают в газообразном состоянии при комнатной температуре, как все газы. Мы знаем, что ни один газ из подкласса инертных газов не вступает в обычную химическую реакцию ни с одним из элементов, и это свойство всех инертных газов.</span></p> 
<p><span>Рассмотрим наследование на примере геометрических фигур. Для описания всего многообразия простых фигур (круг, треугольник, прямоугольник, квадрат и так далее) лучше всего создать базовый класс (<a href="/basis/oop#atd">АТД</a>), который является прародителем всех производных классов. </span></p>
<p><span>Создадим базовый класс CShape, в котором есть только самые общие члены, описывающие фигуру. Эти члены описывают свойства, присущие любой фигуре – тип фигуры и координаты основной точки привязки.</span></p> 
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;Базовый&nbsp;класс&nbsp;Фигура</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CShape</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">protected</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_type;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;тип&nbsp;фигуры</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_xpos;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;X&nbsp;-&nbsp;координата&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_ypos;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;Y&nbsp;-&nbsp;координата&nbsp;точки&nbsp;привязки</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CShape(){m_type=</span><span style="color: #008080;">0</span><span>;&nbsp;m_xpos=</span><span style="color: #008080;">0</span><span>;&nbsp;m_ypos=</span><span style="color: #008080;">0</span><span>;}&nbsp;</span><span style="color: #808080;">//&nbsp;конструктор</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetXPos(</span><span style="color: #0000ff;">int</span><span>&nbsp;x){m_xpos=x;}&nbsp;</span><span style="color: #808080;">//&nbsp;установим&nbsp;X</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetYPos(</span><span style="color: #0000ff;">int</span><span>&nbsp;y){m_ypos=y;}&nbsp;</span><span style="color: #808080;">//&nbsp;установим&nbsp;Y</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Далее создадим от базового класса производные классы, в которых добавим необходимые поля, уточняющие каждый конкретный класс. Для фигуры Circle (круг) необходимо добавить член, который содержит значение радиуса. Фигура Quadrate (квадрат) характеризуется значением стороны квадрата. Поэтому производные классы, унаследованнные от базового класса CShape, будут объявлены таким образом:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;производный&nbsp;класс&nbsp;Круг</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CCircle&nbsp;:&nbsp;</span><span style="color: #0000ff;">public</span><span>&nbsp;CShape&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;после&nbsp;двоеточия&nbsp;указывается&nbsp;базовый&nbsp;класс,</span><br> <span>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;от&nbsp;которого&nbsp;производится&nbsp;наследование</span><br> <span style="color: #0000ff;">private</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_radius;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;радиус&nbsp;круга</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CCircle(){m_type=</span><span style="color: #008080;">1</span><span>;}&nbsp;</span><span style="color: #808080;">//&nbsp;конструктор,&nbsp;тип&nbsp;равен&nbsp;1</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Для квадрата объявление класса выглядит аналогично:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;производный&nbsp;класс&nbsp;Квадрат</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CSquare&nbsp;:&nbsp;</span><span style="color: #0000ff;">public</span><span>&nbsp;CShape&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;после&nbsp;двоеточия&nbsp;указывается&nbsp;базовый&nbsp;класс,</span><br> <span>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;от&nbsp;которого&nbsp;производится&nbsp;наследование&nbsp;</span><br> <span style="color: #0000ff;">private</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_square_side;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;сторона&nbsp;квадрата</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSquare(){m_type=</span><span style="color: #008080;">2</span><span>;}&nbsp;</span><span style="color: #808080;">//&nbsp;конструктор,&nbsp;тип&nbsp;равен&nbsp;2</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Необходимо отметить, что при создании объекта сначала вызывается конструктор базового класса, затем <a href="/basis/types/classes#constructor">конструктор</a> производного класса. При уничтожении объекта сначала вызывается <a href="/basis/types/classes#destructor">деструктор</a> производного класса, а затем деструктор базового класса.</span></p>
<p><span>Таким образом, объявив в базовом классе наиболее общие члены, в производных классах мы можем добавлять дополнительные члены, которые уточняют конкретный класс. Наследование позволяет создавать мощные библиотеки кода, которые можно использовать многократно и повторно.</span></p> 
<p><span>Синтаксис создания производного класса от уже существующего выглядит следующим образом:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">class</span><span>&nbsp;имя_класса&nbsp;:&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(</span><span style="color: #0000ff;">public</span><span>&nbsp;|&nbsp;</span><span style="color: #0000ff;">protected</span><span>&nbsp;|&nbsp;</span><span style="color: #0000ff;">private</span><span>)&nbsp;</span><span style="font-style: italic; vertical-align: sub;">opt</span><span>&nbsp;&nbsp;имя_базового_класса</span><br> <span>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;объявления&nbsp;членов</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><a id="public_inheritance"></a><span>Одним из аспектов производного класса является видимость (открытость) его членов-наследников. Ключевые слова public, protected и private используются для указания того, насколько члены базового класса будут доступны из производного. Использование в заголовке производного класса ключевого класса public, следующего за двоеточием, означает, что защищенные и открытые (protected и public) члены базового класса CShape должны наследоваться как защищенные и открытые члены производного класса CCircle.</span></p> 
<p><span>При создании производного класса в MQL4 по умолчанию используется наследование private, для структур - public. </span></p> 
<p><span>Закрытые члены базового класса недоступны производному классу. Открытое наследование означает также, что производные классы (CCircle и CSquare) являются CShape. То есть, квадрат (CSquare) является фигурой (CShape), но фигура не обязательно должна быть квадратом.</span></p> 
<p><span>Производный класс является модификацией базового класса; он наследует защищенные и открытые члены базового класса. Не могут только наследоваться конструкторы и деструкторы базового класса. Часто в производный класс добавляются новые члены в дополнение к членам базового класса. </span></p> 
<p><span>Производный класс может включать реализацию функций-членов, отличную от базового класса. Это не имеет ничего общего с <a href="/basis/oop/overload">перегрузкой</a>, когда смысл одного и того же имени функции может быть различным для разных сигнатур.</span></p>
<p><a id="protected_inheritance"></a><span>При защищенном наследовании открытые и защищенные члены базового класса становятся защищенными членами производного класса. При закрытом наследовании открытые и защищенные члены базового класса становятся закрытыми членами производного класса.</span></p> 
<p><span>При защищенном и закрытом наследованиях не справедливо отношение, что &nbsp;объект производного класса является объектом базового класса. Защищенное и закрытое наследование встречаются редко и каждое из них нужно использовать с большой осторожностью.</span></p> 
<p><span>Необходимо понимать, что тип наследования (public, protected или private) никак не влияет на способы </span><span style="font-weight: bold;">доступа к членам базовых классов в иерархии наследования из потомка (наследника)</span><span>. При любом типе наследования из производных классов будут доступны только члены базового класса, объявленные со спецификаторами доступа public и protected. Рассмотрим вышесказанное на примере:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">copyright</span><span>&nbsp;</span><span style="color: #008080;">"Copyright&nbsp;2011,&nbsp;MetaQuotes&nbsp;Software&nbsp;Corp."</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">link</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008080;">"https://www.mql5.com"</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">version</span><span>&nbsp;&nbsp;&nbsp;</span><span style="color: #008080;">"1.00"</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Класс-пример&nbsp;с&nbsp;несколькими&nbsp;типами&nbsp;доступа&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CBaseClass</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">private</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;закрытый&nbsp;член&nbsp;недоступен&nbsp;из&nbsp;потомков</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_member;</span><br> <span style="color: #0000ff;">protected</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;защищенный&nbsp;метод&nbsp;доступен&nbsp;из&nbsp;базового&nbsp;класса&nbsp;и&nbsp;его&nbsp;потомков</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Member(){</span><span style="color: #0000ff;">return</span><span>(m_member);}</span><br> <span style="color: #0000ff;">public</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;конструктор&nbsp;класса&nbsp;доступен&nbsp;всем</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBaseClass(){m_member=5;</span><span style="color: #0000ff;">return</span><span>;};</span><br> <span style="color: #0000ff;">private</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;закрытый&nbsp;метод&nbsp;для&nbsp;присвоения&nbsp;значения&nbsp;члену&nbsp;m_member</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Member(</span><span style="color: #0000ff;">int</span><span>&nbsp;value)&nbsp;{&nbsp;m_member=value;};</span><br> <span>&nbsp;</span><br> <span>&nbsp;&nbsp;};</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Производный&nbsp;класс&nbsp;с&nbsp;ошибками&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CDerived:&nbsp;</span><span style="color: #0000ff;">public</span><span>&nbsp;CBaseClass&nbsp;</span><span style="color: #808080;">//&nbsp;public&nbsp;наследование&nbsp;нужно&nbsp;указывать&nbsp;явно,&nbsp;для&nbsp;классов&nbsp;умолчанию&nbsp;используется&nbsp;private</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;Func()&nbsp;</span><span style="color: #808080;">//&nbsp;определим&nbsp;в&nbsp;потомке&nbsp;функцию&nbsp;с&nbsp;обращениями&nbsp;к&nbsp;членам&nbsp;базового&nbsp;класса&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;попытка&nbsp;модификации&nbsp;закрытого&nbsp;члена&nbsp;базового&nbsp;класса</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_member=0;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;ошибка,&nbsp;закрытый&nbsp;член&nbsp;базового&nbsp;класса&nbsp;никому&nbsp;не&nbsp;доступен</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Member(0);&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;ошибка,&nbsp;закрытый&nbsp;метод&nbsp;базового&nbsp;класса&nbsp;не&nbsp;доступен&nbsp;в&nbsp;потомках</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;чтение&nbsp;члена&nbsp;базового&nbsp;класса</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(m_member);&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;ошибка,&nbsp;закрытый&nbsp;член&nbsp;базового&nbsp;класса&nbsp;никому&nbsp;не&nbsp;доступен</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(Member());&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;нет&nbsp;ошибки,&nbsp;защищенный&nbsp;метод&nbsp;доступен&nbsp;из&nbsp;базового&nbsp;класса&nbsp;и&nbsp;его&nbsp;потомков</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>В приведенном примере класс CBaseClass имеет только один публичный метод – конструктор. Конструкторы вызываются автоматически при создании объекта класса. Поэтому извне никак нельзя обратиться ни к закрытому члену m_member, ни к защищенному методу Member(). Но при этом при открытом (public) наследовании метод Member() базового класса будет доступен из потомков. </span></p> 
<p><span>При защищенном (</span><span>protected</span><span>) наследовании все члены базового класса с открытым и защищенным доступом становятся защищенными. Это означает, что если открытые члены-данные и методы базового класса были доступны извне, то при защищенном наследовании теперь они доступны только из классов самого потомка и его последующих производных классах.</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Класс-пример&nbsp;с&nbsp;несколькими&nbsp;типами&nbsp;доступа&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CBaseMathClass</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">private</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;закрытый&nbsp;член&nbsp;недоступен&nbsp;из&nbsp;потомков</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_Pi;</span><br> <span style="color: #0000ff;">public</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;получение&nbsp;и&nbsp;установка&nbsp;значения&nbsp;для&nbsp;m_Pi</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetPI(</span><span style="color: #0000ff;">double</span><span>&nbsp;v){m_Pi=v;</span><span style="color: #0000ff;">return</span><span>;};</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetPI(){</span><span style="color: #0000ff;">return</span><span>&nbsp;m_Pi;};</span><br> <span style="color: #0000ff;">public</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;конструктор&nbsp;класса&nbsp;доступен&nbsp;всем</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CBaseMathClass()&nbsp;{SetPI(3.14);&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"%s"</span><span>,</span><span style="color: #0000ff;">__FUNCTION__</span><span>);};</span><br> <span>&nbsp;&nbsp;};</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Производный&nbsp;класс,&nbsp;в&nbsp;котором&nbsp;нельзя&nbsp;уже&nbsp;изменить&nbsp;m_Pi&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CProtectedChildClass:&nbsp;</span><span style="color: #0000ff;">protected</span><span>&nbsp;CBaseMathClass&nbsp;</span><span style="color: #808080;">//&nbsp;защищенное&nbsp;наследование</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">private</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_radius;</span><br> <span style="color: #0000ff;">public</span><span>:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;открытые&nbsp;методы&nbsp;в&nbsp;потомке</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetRadius(</span><span style="color: #0000ff;">double</span><span>&nbsp;r){m_radius=r;&nbsp;</span><span style="color: #0000ff;">return</span><span>;};</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetCircleLength(){</span><span style="color: #0000ff;">return</span><span>&nbsp;GetPI()*m_radius;};</span><br> <span>&nbsp;&nbsp;};</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Функция&nbsp;запуска&nbsp;скрипта&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;при&nbsp;создании&nbsp;потомка&nbsp;констурктор&nbsp;базового&nbsp;класса&nbsp;вызовется&nbsp;автоматически</span><br> <span>&nbsp;&nbsp;&nbsp;CProtectedChildClass&nbsp;pt;</span><br> <span style="color: #808080;">//---&nbsp;укажем&nbsp;радиус</span><br> <span>&nbsp;&nbsp;&nbsp;pt.SetRadius(10);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Length=%G"</span><span>,pt.GetCircleLength());</span><br> <span style="color: #808080;">//---&nbsp;если&nbsp;раскомментировать&nbsp;строку&nbsp;ниже,&nbsp;то&nbsp;получим&nbsp;ошибку&nbsp;на&nbsp;этапе&nbsp;компиляции,так&nbsp;как&nbsp;метод&nbsp;SetPi()&nbsp;стал&nbsp;защищенным</span><br> <span style="color: #808080;">//&nbsp;pt.SetPI(3);&nbsp;</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;а&nbsp;теперь&nbsp;объявим&nbsp;переменную&nbsp;базового&nbsp;класса&nbsp;и&nbsp;попробуем&nbsp;задать&nbsp;константу&nbsp;Pi&nbsp;равной&nbsp;10</span><br> <span>&nbsp;&nbsp;&nbsp;CBaseMathClass&nbsp;bc;</span><br> <span>&nbsp;&nbsp;&nbsp;bc.SetPI(10);</span><br> <span style="color: #808080;">//---&nbsp;посмотрим&nbsp;что&nbsp;получилось</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"bc.GetPI()=%G"</span><span>,bc.GetPI());</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>В данном пример показано, что методы SetPI() и GetPI() в базовом классе CBaseMathClass являются открытыми и доступны для вызова из любого места программы. Но в то же время для его потомка CProtectedChildClass вызовы этих методов можно делать только из методов самого класса CProtectedChildClass или его потомков.</span></p> 
<p><span>При закрытом (</span><span>private</span><span>) наследовании все члены базового класса с доступом </span><span>public</span><span> и </span><span>protected</span><span> становятся закрытыми, и при дальнейшем наследовании обращение к ним становится невозможным.</span></p> 
<p><span>В MQL4 нет множественного наследования.</span></p> 
<p><span>Смотри также</span></p> 
<p><span><a href="/basis/types/classes">Структуры и классы</a></span></p>
<br>