<h1>Полиморфизм</h1> 
<p><span>Полиморфизм – это возможность для объектов разных классов, связанных с помощью наследования, реагировать различным способом при обращении к одной и той же функции-элементу. Это помогает создавать универсальные механизмы, описывающие поведение не только базового класса, но и классов-потомков.</span></p> 
<p><span>Продолжим разработку базового класса CShape, в котором определим функцию-член GetArea(), предназначенную для расчета площади фигуры. Во всех классах-потомках, произведенных наследованием от базового класса, мы переопределим эту функцию в соответствие с правилами расчета площади конкретной фигуры.</span></p> 
<p><span>Для квадрата (класс CSquare) площадь вычисляется через стороны, для круга (класс CCircle) площадь выражается через радиус и так далее. Мы можем создать массив для хранения объектов типа CShape, в котором можно будет хранить как объект базового класса, так и всех его потомков. В дальнейшем мы можем вызывать одну и ту же функцию для любого элемента данного массива.</span></p> 
<p><span style="font-weight: bold;">Пример:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;Базовый&nbsp;класс</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CShape</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">protected</span><span>:&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_type;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;тип&nbsp;фигуры</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_xpos;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;X&nbsp;-&nbsp;координата&nbsp;точки&nbsp;привязки</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_ypos;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;Y&nbsp;-&nbsp;координата&nbsp;точки&nbsp;привязки</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CShape(){m_type=</span><span style="color: #008080;">0</span><span>;};&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;конструктор,&nbsp;тип&nbsp;равен&nbsp;нулю</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetType(){</span><span style="color: #0000ff;">return</span><span>(m_type);};</span><span style="color: #808080;">//&nbsp;возвращает&nbsp;тип&nbsp;фигуры</span><br> <span style="color: #0000ff;">virtual</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GetArea(){</span><span style="color: #0000ff;">return</span><span>&nbsp;(</span><span style="color: #008080;">0</span><span>);&nbsp;}</span><span style="color: #808080;">//&nbsp;возвращает&nbsp;площадь&nbsp;фигуры</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Теперь все производные классы имеют функцию-член getArea(), которая возвращает нулевое значение. Реализация этой функции в каждом потомке будет отличаться.</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;производный&nbsp;класс&nbsp;Круг</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CCircle&nbsp;:&nbsp;</span><span style="color: #0000ff;">public</span><span>&nbsp;CShape&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;после&nbsp;двоеточия&nbsp;указывается&nbsp;базовый&nbsp;класс,</span><br> <span>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;от&nbsp;которого&nbsp;производится&nbsp;наследование&nbsp;</span><br> <span style="color: #0000ff;">private</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_radius;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;радиус&nbsp;круга</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CCircle(){m_type=</span><span style="color: #008080;">1</span><span>;};&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;конструктор,&nbsp;тип&nbsp;равен&nbsp;1&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetRadius(</span><span style="color: #0000ff;">double</span><span>&nbsp;r){m_radius=r;};</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">virtual</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;GetArea(){</span><span style="color: #0000ff;">return</span><span>&nbsp;(</span><span style="color: #008080;">3</span><span>.</span><span style="color: #008080;">14</span><span>*m_radius*m_radius);}</span><span style="color: #808080;">//&nbsp;площадь&nbsp;круга</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Для квадрата объявление класса выглядит аналогично:</span></p> 
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;производный&nbsp;класс&nbsp;Квадрат</span><br> <span style="color: #0000ff;">class</span><span>&nbsp;CSquare&nbsp;:&nbsp;</span><span style="color: #0000ff;">public</span><span>&nbsp;CShape&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;после&nbsp;двоеточия&nbsp;указывается&nbsp;базовый&nbsp;класс,</span><br> <span>&nbsp;&nbsp;{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;от&nbsp;которого&nbsp;производится&nbsp;наследование&nbsp;</span><br> <span style="color: #0000ff;">private</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_square_side;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;сторона&nbsp;квадрата</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CSquare(){m_type=</span><span style="color: #008080;">2</span><span>;};&nbsp;</span><span style="color: #808080;">//&nbsp;конструктор,&nbsp;тип&nbsp;равен&nbsp;2&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SetSide(</span><span style="color: #0000ff;">double</span><span>&nbsp;s){m_square_side=s;};</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">virtual</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;GetArea(){</span><span style="color: #0000ff;">return</span><span>&nbsp;(m_square_side*m_square_side);}</span><span style="color: #808080;">//площадь&nbsp;квадрата</span><br> <span>&nbsp;&nbsp;};</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Так как для вычисления площади квадрата и круга требуются соответствующие значения членов m_radius и m_square_side, то в объявлении соответствующего класса мы добавили функции SetRadius() и SetSide(). </span></p> 
<p><span>Предполагается, что в программе у нас используются объекты разного типа (CCircle и CSquare), но унаследованные от одного базового типа CShape. Полиморфизм позволяет нам создать массив объектов базового типа CShape, но при объявлении этого массива сами объекты еще неизвестны и их тип неопределен. </span></p> 
<p><span>Решение о том, объект какого типа будет содержаться в каждом элементе массива, будет приниматься непосредственно при выполнении программы. Это подразумевает <a href="/basis/operators/newoperator">динамическое создание</a> объектов соответствующих классов, и, следовательно, необходимость вместо самих объектов использовать <a href="/basis/types/object_pointers">указатели объектов</a>. </span></p>
<p><span>Для динамического создания объектов используется оператор <a href="/basis/operators/newoperator">new</a>, каждый такой объект нужно самостоятельно и явно удалять оператором <a href="/basis/operators/deleteoperator">delete</a>. Поэтому мы объявим массив указателей типа CShape и для каждого его элемента создадим объект нужного типа (</span><span style="font-weight: bold;">new Имя_класса)</span><span>, как это показано в примере скрипта:</span></p>
<div style="text-align: left; text-indent: 0px; page-break-inside: avoid; border-color: #d8dfea; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;"> 
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody> 
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;объявим&nbsp;массив&nbsp;указателей&nbsp;объектов&nbsp;базового&nbsp;типа&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;CShape&nbsp;*shapes[5];&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;массив&nbsp;указателей&nbsp;на&nbsp;объекты&nbsp;CShape</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;здесь&nbsp;заполняем&nbsp;массив&nbsp;производными&nbsp;объектами</span><br> <span style="color: #808080;">//---&nbsp;объявим&nbsp;указатель&nbsp;на&nbsp;объект&nbsp;типа&nbsp;CCircle</span><br> <span>&nbsp;&nbsp;&nbsp;CCircle&nbsp;*circle=</span><span style="color: #0000ff;">new</span><span>&nbsp;CCircle();</span><br> <span style="color: #808080;">//---&nbsp;задаем&nbsp;свойства&nbsp;объекта&nbsp;по&nbsp;указателю&nbsp;circle</span><br> <span>&nbsp;&nbsp;&nbsp;circle.SetRadius(2.5);</span><br> <span style="color: #808080;">//---&nbsp;поместим&nbsp;в&nbsp;shapes[0]&nbsp;значение&nbsp;указателя</span><br> <span>&nbsp;&nbsp;&nbsp;shapes[0]=circle;</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;создаем&nbsp;еще&nbsp;один&nbsp;объект&nbsp;CCircle&nbsp;и&nbsp;запишем&nbsp;его&nbsp;указатель&nbsp;в&nbsp;shapes[1]</span><br> <span>&nbsp;&nbsp;&nbsp;circle=</span><span style="color: #0000ff;">new</span><span>&nbsp;CCircle();</span><br> <span>&nbsp;&nbsp;&nbsp;shapes[1]=circle;</span><br> <span>&nbsp;&nbsp;&nbsp;circle.SetRadius(5);</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;тут&nbsp;мы&nbsp;намеренно&nbsp;"забыли"&nbsp;задать&nbsp;значение&nbsp;для&nbsp;shapes[2]</span><br> <span style="color: #808080;">//circle=new&nbsp;CCircle();</span><br> <span style="color: #808080;">//circle.SetRadius(10);</span><br> <span style="color: #808080;">//shapes[2]=circle;</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;для&nbsp;неиспользуемого&nbsp;элемента&nbsp;установим&nbsp;значение&nbsp;NULL</span><br> <span>&nbsp;&nbsp;&nbsp;shapes[2]=</span><span style="color: #0000ff;">NULL</span><span>;</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;создаем&nbsp;объект&nbsp;CSquare&nbsp;и&nbsp;запишем&nbsp;его&nbsp;указатель&nbsp;в&nbsp;shapes[3]</span><br> <span>&nbsp;&nbsp;&nbsp;CSquare&nbsp;*square=</span><span style="color: #0000ff;">new</span><span>&nbsp;CSquare();</span><br> <span>&nbsp;&nbsp;&nbsp;square.SetSide(5);</span><br> <span>&nbsp;&nbsp;&nbsp;shapes[3]=square;</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;создаем&nbsp;объект&nbsp;CSquare&nbsp;и&nbsp;запишем&nbsp;его&nbsp;указатель&nbsp;в&nbsp;shapes[4]</span><br> <span>&nbsp;&nbsp;&nbsp;square=</span><span style="color: #0000ff;">new</span><span>&nbsp;CSquare();</span><br> <span>&nbsp;&nbsp;&nbsp;square.SetSide(10);</span><br> <span>&nbsp;&nbsp;&nbsp;shapes[4]=square;</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;массив&nbsp;указателей&nbsp;есть,&nbsp;получим&nbsp;его&nbsp;размер</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;total=</span><span style="color: #0000ff;">ArraySize</span><span>(shapes);</span><br> <span style="color: #808080;">//---&nbsp;пройдем&nbsp;в&nbsp;цикле&nbsp;по&nbsp;всем&nbsp;указателям&nbsp;в&nbsp;массиве&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(</span><span style="color: #0000ff;">int</span><span>&nbsp;i=0;&nbsp;i&lt;5;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;если&nbsp;по&nbsp;указанному&nbsp;индексу&nbsp;указатель&nbsp;является&nbsp;валидным</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">CheckPointer</span><span>(shapes[i])!=</span><span style="color: #0000ff;">POINTER_INVALID</span><span>)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;выведем&nbsp;в&nbsp;лог&nbsp;тип&nbsp;и&nbsp;площадь&nbsp;фигуры</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Объект&nbsp;типа&nbsp;%d&nbsp;имеет&nbsp;площадь&nbsp;%G"</span><span>,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shapes[i].GetType(),</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;shapes[i].GetArea());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;если&nbsp;указатель&nbsp;имеет&nbsp;тип&nbsp;POINTER_INVALID</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;сообщим&nbsp;об&nbsp;ошибке</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Объект&nbsp;shapes[%d]&nbsp;не&nbsp;инициализирован!&nbsp;Его&nbsp;указатель&nbsp;%s"</span><span>,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i,</span><span style="color: #0000ff;">EnumToString</span><span>(</span><span style="color: #0000ff;">CheckPointer</span><span>(shapes[i])));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;мы&nbsp;должны&nbsp;самостоятельно&nbsp;уничтожить&nbsp;все&nbsp;созданные&nbsp;динамические&nbsp;объекты</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(</span><span style="color: #0000ff;">int</span><span>&nbsp;i=0;i&lt;total;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;удалять&nbsp;можно&nbsp;только&nbsp;объекты,&nbsp;чей&nbsp;указатель&nbsp;имеет&nbsp;тип&nbsp;POINTER_DYNAMIC</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">CheckPointer</span><span>(shapes[i])==</span><span style="color: #0000ff;">POINTER_DYNAMIC</span><span>)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;сообщим&nbsp;об&nbsp;удалении</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Удаляем&nbsp;shapes[%d]"</span><span>,i);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;уничтожим&nbsp;объект&nbsp;по&nbsp;его&nbsp;указателю</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">delete</span><span>&nbsp;shapes[i];</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody> 
 </table> 
</div> 
<p><span>Обратите внимание, что при уничтожении объекта оператором <a href="/basis/operators/deleteoperator">delete</a> необходимо проверить <a href="/constants/namedconstants/enum_pointer_type">тип его указателя</a>. Удалять с помощью delete можно только объекты, имеющие указатель <a href="/constants/namedconstants/enum_pointer_type">POINTER_DYNAMIC</a>, для указателей другого типа будет получена ошибка.</span></p>
<p><span>Кроме переопределения функции при наследовании, полиморфизм включает в себя также и реализацию одной и той же функции с разным набором параметров в пределах одного класса. Это означает, что в классе может быть определено несколько функций с одним и тем же именем, но с разным типом и/или набором параметров. В этом случае полиморфизм реализуется через <a href="/basis/function/functionoverload">перегрузку&nbsp;функций</a>.</span></p>
<br>