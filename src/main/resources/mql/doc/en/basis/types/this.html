<h1>References: Modifier &amp; and Keyword this</h1> 
<h2>Passing Parameters by Reference</h2> 
<p><span>In MQL4 parameters of <a href="/basis/types#base_types">simple</a> types can be passed both by value and by reference, while parameters of <a href="/basis/types#complex_types">compound</a> types are always passed by reference. To inform the compiler that a parameter must be passed by reference, the ampersand character </span><span style="font-weight: bold;">&amp;</span><span> is added before the parameter name</span><span style="font-family: Tahoma,Geneva,Verdana,sans-serif;">.</span><span> </span></p> 
<p><span>Passing a parameter by reference means passing the address of the variable, that's why all changes in the parameter that is passed by reference will be immediately reflected in the source variable. Using parameter passing by reference, you can implement return of several results of a function at the same time. In order to prevent changing of a parameter passed by reference, use the <a href="/basis/variables#const">const</a> modifier.</span></p> 
<p><span>Thus, if the input parameter of a function is an <a href="/basis/variables#array_define">array</a>, a structure or class object, symbol '</span><span style="font-family: Tahoma,Geneva,Verdana,sans-serif;">&amp;</span><span>' is placed in the function header after the variable type and before its name.</span></p> 
<p><span style="font-weight: bold;">Example</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">class</span><span>&nbsp;CDemoClass</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">private</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_array[];</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setArray(</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;array[]);</span><br> <span>&nbsp;&nbsp;};</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;filling&nbsp;the&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;CDemoClass::setArray(</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;array[])</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">ArraySize</span><span>(array)&gt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArrayResize</span><span>(m_array,</span><span style="color: #0000ff;">ArraySize</span><span>(array));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArrayCopy</span><span>(m_array,&nbsp;array);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>In the above example <a href="/basis/types/classes#class">class</a> CDemoClass is declared, which contains the <a href="/basis/variables#private">private</a> member - array m_array[] of <a href="/basis/types/double">double</a> type. <a href="/basis/function">Function</a> setArray() is declared, to which array[] is passed by reference. If the function header doesn't contain the indication about passing by reference, i.e. doesn't contain the ampersand character, an error message will be generated at the attempt to compile such a code.</span></p> 
<p><span>Despite the fact that the array is passed by reference, we can't assign one array to another. We need to perform the element-wise copying of contents of the source array to the recipient array. The presence of </span><span style="font-family: Tahoma,Geneva,Verdana,sans-serif;">&amp;</span><span> in the function description is the obligatory condition for arrays and structures when passed as the function parameter.</span></p> 
<h2>Keyword this</h2> 
<p><span>A variable of class type (object) can be passed both by reference and by <a href="/basis/types/object_pointers">pointer</a>. As well as reference, the pointer allows having access to an object. After the object pointer is declared, the <a href="/basis/operators/newoperator">new</a> operator should be applied to it to create and initialize it.</span></p> 
<p><span>The reserved word </span><span style="font-weight: bold;">this</span><span> is intended for obtaining the reference of the object to itself, which is available inside class or structure methods. </span><span style="font-weight: bold;">this</span><span> always references to the object, in the method of which it is used, and the expression <a href="/common/getpointer">GetPointer</a>(this) gives the pointer of the object, whose member is the function, in which call of GetPointer() is performed. In MQL4 functions can't return objects, but they can return the object pointer. </span></p> 
<p><span>Thus, if we need a function to return an object, we can return the pointer of this object in the form of GetPointer(this). Let's add function getDemoClass() that returns pointer of the object of this class, into the description of CDemoClass.</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">class</span><span>&nbsp;CDemoClass</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #0000ff;">private</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;m_array[];</span><br> <span>&nbsp;</span><br> <span style="color: #0000ff;">public</span><span>:</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;setArray(</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;array[]);</span><br> <span>&nbsp;&nbsp;&nbsp;CDemoClass&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*getDemoClass();</span><br> <span>&nbsp;&nbsp;};</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;filling&nbsp;the&nbsp;array&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;&nbsp;CDemoClass::setArray(</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;array[])</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">ArraySize</span><span>(array)&gt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArrayResize</span><span>(m_array,</span><span style="color: #0000ff;">ArraySize</span><span>(array));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArrayCopy</span><span>(m_array,array);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;returns&nbsp;its&nbsp;own&nbsp;pointer&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span>CDemoClass&nbsp;*CDemoClass::getDemoClass(</span><span style="color: #0000ff;">void</span><span>)</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">GetPointer</span><span>(</span><span style="color: #0000ff;">this</span><span>));</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>Structures don't have pointers, operators </span><span style="font-style: italic;">new</span><span> and </span><span style="font-style: italic;">delete </span><span>can't be applied to them, GetPointer(this) can't be used</span><span style="font-style: italic;">.</span><span> </span></p> 
<p><span>See also</span></p> 
<p><span><a href="/basis/types/object_pointers">Object Pointers</a>, <a href="/basis/variables/object_live">Creating and Deleting Objects</a>, <a href="/basis/variables/variable_scope">Visibility Scope and Lifetime of Variables</a></span></p> 
<br>