<h1>TerminalClose</h1> 
<p><span>The function commands the terminal to complete operation.</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>bool&nbsp;&nbsp;</span><span>TerminalClose</span><span>(</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int</span><span style="color: #000000;">&nbsp;</span><span>ret_code</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;closing&nbsp;code&nbsp;of&nbsp;the&nbsp;client&nbsp;terminal</span><br> <span>&nbsp;&nbsp;&nbsp;);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>Parameters</span></p> 
<p><span>ret_code</span></p> 
<p><span>[in] &nbsp;Return code, returned by the process of the client terminal at the operation completion.</span></p> 
<p><span>Return Value</span></p> 
<p><span>The function returns true on success, otherwise &nbsp;- false.</span></p> 
<p><span>Note</span></p> 
<p><span>The TerminalClose() function does not stop the terminal immediately, it just commands the terminal to complete its operation. </span></p> 
<p><span>The code of an Expert Advisor that called TerminalClose() must have all arrangements for the immediate completion (e.g. all previously opened files must be closed in the normal mode). Call of this function must be followed by the <a href="/basis/operators/return">return operator</a>.</span></p> 
<p><span>The </span><span style="font-style: italic;">ret_code</span><span> parameter allows indicating the necessary return code for analyzing reasons of the program termination of the terminal operation when starting it from the command prompt.</span></p> 
<p><span style="font-weight: bold;">Example:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;input&nbsp;parameters</span><br> <span style="color: #0000ff;">input</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;tiks_before=500;&nbsp;</span><span style="color: #808080;">//&nbsp;number&nbsp;of&nbsp;ticks&nbsp;till&nbsp;termination</span><br> <span style="color: #0000ff;">input</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;pips_to_go=15;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;distance&nbsp;in&nbsp;pips&nbsp;</span><br> <span style="color: #0000ff;">input</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;seconds_st=50;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;number&nbsp;of&nbsp;seconds&nbsp;given&nbsp;to&nbsp;the&nbsp;Expert&nbsp;Advisor</span><br> <span style="color: #808080;">//---&nbsp;globals</span><br> <span style="color: #0000ff;">datetime</span><span>&nbsp;&nbsp;&nbsp;launch_time;</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick_counter=0;</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Expert&nbsp;deinitialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnDeinit</span><span>(</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;reason)</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #0000ff;">__FUNCTION__</span><span>,</span><span style="color: #008080;">"&nbsp;reason&nbsp;code&nbsp;=&nbsp;"</span><span>,reason);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Comment</span><span>(</span><span style="color: #008080;">""</span><span>);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Expert&nbsp;tick&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnTick</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">static</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;first_bid=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">MqlTick</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;tick;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distance;</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SymbolInfoTick</span><span>(</span><span style="color: #0000ff;">_Symbol</span><span>,tick);</span><br> <span>&nbsp;&nbsp;&nbsp;tick_counter++;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(first_bid==0.0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;launch_time=tick.time;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;first_bid=tick.bid;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"first_bid&nbsp;="</span><span>,first_bid);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---&nbsp;price&nbsp;distance&nbsp;in&nbsp;pips</span><br> <span>&nbsp;&nbsp;&nbsp;distance=(tick.bid-first_bid)/</span><span style="color: #0000ff;">_Point</span><span>;</span><br> <span style="color: #808080;">//---&nbsp;show&nbsp;a&nbsp;notification&nbsp;to&nbsp;track&nbsp;the&nbsp;EA&nbsp;operation</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;comm=</span><span style="color: #008080;">"From&nbsp;the&nbsp;moment&nbsp;of&nbsp;start:\r\n\x25CF&nbsp;elapsed&nbsp;seconds:&nbsp;"</span><span>+</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IntegerToString</span><span>(tick.time-launch_time)+</span><span style="color: #008080;">"&nbsp;;"</span><span>+</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008080;">"\r\n\x25CF&nbsp;ticks&nbsp;received:&nbsp;"</span><span>+(</span><span style="color: #0000ff;">string</span><span>)tick_counter+</span><span style="color: #008080;">"&nbsp;;"</span><span>+</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #008080;">"\r\n\x25CF&nbsp;price&nbsp;went&nbsp;in&nbsp;points:&nbsp;"</span><span>+</span><span style="color: #0000ff;">StringFormat</span><span>(</span><span style="color: #008080;">"%G"</span><span>,distance);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Comment</span><span>(comm);</span><br> <span style="color: #808080;">//---&nbsp;section&nbsp;for&nbsp;checking&nbsp;condition&nbsp;to&nbsp;close&nbsp;the&nbsp;terminal</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(tick_counter&gt;=tiks_before)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TerminalClose</span><span>(0);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;exit&nbsp;by&nbsp;tick&nbsp;counter</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(distance&gt;pips_to_go)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TerminalClose</span><span>(1);&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;go&nbsp;up&nbsp;by&nbsp;the&nbsp;number&nbsp;of&nbsp;pips&nbsp;equal&nbsp;to&nbsp;pips_to_go</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(distance&lt;-pips_to_go)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TerminalClose</span><span>(-1);&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;go&nbsp;down&nbsp;by&nbsp;the&nbsp;number&nbsp;of&nbsp;pips&nbsp;equal&nbsp;to&nbsp;pips_to_go</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(tick.time-launch_time&gt;seconds_st)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">TerminalClose</span><span>(100);&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;termination&nbsp;by&nbsp;timeout</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>See also</span></p> 
<p><span><a href="/runtime/running">Program running</a>, <a href="/runtime/errors">Execution errors</a>, <a href="/constants/namedconstants/uninit">Reasons for deinitialization</a></span></p> 
<br>