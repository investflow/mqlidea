<h1>Custom Indicators Properties</h1> 
<p><span>A custom indicator has a lot of settings to provide convenient displaying. These settings are made through the assignment of corresponding indicator properties using functions <a href="/customind/indicatorsetdouble">IndicatorSetDouble()</a>, <a href="/customind/indicatorsetinteger">IndicatorSetInteger()</a> and <a href="/customind/indicatorsetstring">IndicatorSetString()</a>. Identifiers of indicator properties are listed in the ENUM_CUSTOMIND_PROPERTY enumeration.</span></p> 
<p><a id="enum_customind_property_integer"></a><span style="font-weight: bold;">ENUM_CUSTOMIND_PROPERTY_INTEGER</span></p> 
<div style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="5" border="1" style="border:solid 2px #b1c2d6; border-spacing:0px; border-collapse:collapse;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; width:200px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>ID</span></p> </td> 
    <td style="vertical-align:top; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Description</span></p> </td> 
    <td style="vertical-align:top; width:340px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Property type</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_DIGITS</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Accuracy of drawing of indicator values</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>int</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_HEIGHT</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Fixed height of the indicator's window (the preprocessor command </span><span><a href="/basis/preprosessor/compilation">#property indicator_height</a></span><span>)</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>int</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_LEVELS</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Number of levels in the indicator window</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>int</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_LEVELCOLOR</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Color of the level line</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>color &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;sets color for all levels</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_LEVELSTYLE</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Style of the level line</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span><a href="/constants/indicatorconstants/drawstyles#enum_line_style">ENUM_LINE_STYLE</a> &nbsp;sets style for all levels</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_LEVELWIDTH</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Thickness of the level line</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>int &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; sets width for all levels</span></p> </td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><a id="enum_customind_property_double"></a><span style="font-weight: bold;">ENUM_CUSTOMIND_PROPERTY_DOUBLE</span></p> 
<div style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="5" border="1" style="border:solid 2px #b1c2d6; border-spacing:0px; border-collapse:collapse;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; width:200px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>ID</span></p> </td> 
    <td style="vertical-align:top; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Description</span></p> </td> 
    <td style="vertical-align:top; width:340px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Property type</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_MINIMUM</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Minimum of the indicator window</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>double</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_MAXIMUM</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Maximum of the indicator window</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>double</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_LEVELVALUE</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Level value</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>double &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;modifier = level number</span></p> </td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><a id="enum_customind_property_string"></a><span style="font-weight: bold;">ENUM_CUSTOMIND_PROPERTY_STRING</span></p> 
<div style="text-align: justify; text-indent: 0px; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="5" border="1" style="border:solid 2px #b1c2d6; border-spacing:0px; border-collapse:collapse;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; width:200px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>ID</span></p> </td> 
    <td style="vertical-align:top; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Description</span></p> </td> 
    <td style="vertical-align:top; width:340px; background-color:#dbe9f9; padding:5px; border:solid thin #b1c2d6;"><p><span>Property type</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_SHORTNAME</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Short indicator name</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>string</span></p> </td> 
   </tr> 
   <tr>
    <td style="vertical-align:top; width:200px; padding:5px; border:solid thin #b1c2d6;"><p><span>INDICATOR_LEVELTEXT</span></p> </td> 
    <td style="vertical-align:top; padding:5px; border:solid thin #b1c2d6;"><p><span>Level description</span></p> </td> 
    <td style="vertical-align:top; width:340px; padding:5px; border:solid thin #b1c2d6;"><p><span>string &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;modifier = level number</span></p> </td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span style="font-weight: bold;">Example:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">description</span><span>&nbsp;</span><span style="color: #008080;">"Relative&nbsp;Strength&nbsp;Index"</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">strict</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">indicator_separate_window</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">indicator_buffers</span><span>&nbsp;3</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;indicator_color1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">clrDodgerBlue</span><br> <span style="color: #808080;">//---&nbsp;input&nbsp;parameters</span><br> <span style="color: #0000ff;">input</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;InpRSIPeriod=14;&nbsp;</span><span style="color: #808080;">//&nbsp;RSI&nbsp;Period</span><br> <span style="color: #808080;">//---&nbsp;buffers</span><br> <span style="color: #0000ff;">double</span><span>&nbsp;ExtRSIBuffer[];</span><br> <span style="color: #0000ff;">double</span><span>&nbsp;ExtPosBuffer[];</span><br> <span style="color: #0000ff;">double</span><span>&nbsp;ExtNegBuffer[];</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Custom&nbsp;indicator&nbsp;initialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">OnInit</span><span>(</span><span style="color: #0000ff;">void</span><span>)</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;short_name;</span><br> <span style="color: #808080;">//---&nbsp;2&nbsp;additional&nbsp;buffers&nbsp;are&nbsp;used&nbsp;for&nbsp;calculations.</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IndicatorBuffers</span><span>(3);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SetIndexBuffer</span><span>(0,ExtRSIBuffer);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SetIndexBuffer</span><span>(1,ExtPosBuffer);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SetIndexBuffer</span><span>(2,ExtNegBuffer);</span><br> <span style="color: #808080;">//---&nbsp;set&nbsp;levels&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IndicatorSetInteger</span><span>(</span><span style="color: #0000ff;">INDICATOR_LEVELS</span><span>,2);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IndicatorSetDouble</span><span>(</span><span style="color: #0000ff;">INDICATOR_LEVELVALUE</span><span>,0,30);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IndicatorSetDouble</span><span>(</span><span style="color: #0000ff;">INDICATOR_LEVELVALUE</span><span>,1,70);</span><br> <span style="color: #808080;">//---&nbsp;set&nbsp;maximum&nbsp;and&nbsp;minimum&nbsp;for&nbsp;subwindow&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IndicatorSetDouble</span><span>(</span><span style="color: #0000ff;">INDICATOR_MINIMUM</span><span>,0);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IndicatorSetDouble</span><span>(</span><span style="color: #0000ff;">INDICATOR_MAXIMUM</span><span>,100);</span><br> <span style="color: #808080;">//---&nbsp;indicator&nbsp;line</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SetIndexStyle</span><span>(0,</span><span style="color: #0000ff;">DRAW_LINE</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SetIndexBuffer</span><span>(0,ExtRSIBuffer);</span><br> <span style="color: #808080;">//---&nbsp;name&nbsp;for&nbsp;DataWindow&nbsp;and&nbsp;indicator&nbsp;subwindow&nbsp;label</span><br> <span>&nbsp;&nbsp;&nbsp;short_name=</span><span style="color: #008080;">"RSI("</span><span>+</span><span style="color: #0000ff;">string</span><span>(InpRSIPeriod)+</span><span style="color: #008080;">")"</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">IndicatorShortName</span><span>(short_name);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SetIndexLabel</span><span>(0,short_name);</span><br> <span style="color: #808080;">//---&nbsp;check&nbsp;for&nbsp;input</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(InpRSIPeriod&lt;2)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Incorrect&nbsp;value&nbsp;for&nbsp;input&nbsp;variable&nbsp;InpRSIPeriod&nbsp;=&nbsp;"</span><span>,InpRSIPeriod);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">INIT_FAILED</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">SetIndexDrawBegin</span><span>(0,InpRSIPeriod);</span><br> <span style="color: #808080;">//---&nbsp;initialization&nbsp;done</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">INIT_SUCCEEDED</span><span>);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Relative&nbsp;Strength&nbsp;Index&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">OnCalculate</span><span>(</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;rates_total,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;prev_calculated,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">datetime</span><span>&nbsp;&amp;</span><span style="color: #0000ff;">time</span><span>[],</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;</span><span style="color: #0000ff;">open</span><span>[],</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;</span><span style="color: #0000ff;">high</span><span>[],</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;</span><span style="color: #0000ff;">low</span><span>[],</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;&amp;</span><span style="color: #0000ff;">close</span><span>[],</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">long</span><span>&nbsp;&amp;tick_volume[],</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">long</span><span>&nbsp;&amp;</span><span style="color: #0000ff;">volume</span><span>[],</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&amp;spread[])</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;i,pos;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;diff;</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">Bars</span><span>&lt;=InpRSIPeriod&nbsp;||&nbsp;InpRSIPeriod&lt;2)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(0);</span><br> <span style="color: #808080;">//---&nbsp;counting&nbsp;from&nbsp;0&nbsp;to&nbsp;rates_total</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArraySetAsSeries</span><span>(ExtRSIBuffer,</span><span style="color: #0000ff;">false</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArraySetAsSeries</span><span>(ExtPosBuffer,</span><span style="color: #0000ff;">false</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArraySetAsSeries</span><span>(ExtNegBuffer,</span><span style="color: #0000ff;">false</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ArraySetAsSeries</span><span>(</span><span style="color: #0000ff;">close</span><span>,</span><span style="color: #0000ff;">false</span><span>);</span><br> <span style="color: #808080;">//---&nbsp;preliminary&nbsp;calculations</span><br> <span>&nbsp;&nbsp;&nbsp;pos=prev_calculated-1;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(pos&lt;=InpRSIPeriod)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;first&nbsp;RSIPeriod&nbsp;values&nbsp;of&nbsp;the&nbsp;indicator&nbsp;are&nbsp;not&nbsp;calculated</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[0]=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtPosBuffer[0]=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtNegBuffer[0]=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;sump=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;sumn=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(i=1;&nbsp;i&lt;=InpRSIPeriod;&nbsp;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[i]=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtPosBuffer[i]=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtNegBuffer[i]=0.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff=</span><span style="color: #0000ff;">close</span><span>[i]-</span><span style="color: #0000ff;">close</span><span>[i-1];</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(diff&gt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sump+=diff;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sumn-=diff;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;calculate&nbsp;first&nbsp;visible&nbsp;value</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtPosBuffer[InpRSIPeriod]=sump/InpRSIPeriod;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtNegBuffer[InpRSIPeriod]=sumn/InpRSIPeriod;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(ExtNegBuffer[InpRSIPeriod]!=0.0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[InpRSIPeriod]=100.0-(100.0/(1.0+ExtPosBuffer[InpRSIPeriod]/ExtNegBuffer[InpRSIPeriod]));</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(ExtPosBuffer[InpRSIPeriod]!=0.0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[InpRSIPeriod]=100.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[InpRSIPeriod]=50.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;prepare&nbsp;the&nbsp;position&nbsp;value&nbsp;for&nbsp;main&nbsp;calculation</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos=InpRSIPeriod+1;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---&nbsp;the&nbsp;main&nbsp;loop&nbsp;of&nbsp;calculations</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">for</span><span>(i=pos;&nbsp;i&lt;rates_total&nbsp;&amp;&amp;&nbsp;!</span><span style="color: #0000ff;">IsStopped</span><span>();&nbsp;i++)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;diff=</span><span style="color: #0000ff;">close</span><span>[i]-</span><span style="color: #0000ff;">close</span><span>[i-1];</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtPosBuffer[i]=(ExtPosBuffer[i-1]*(InpRSIPeriod-1)+(diff&gt;0.0?diff:0.0))/InpRSIPeriod;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtNegBuffer[i]=(ExtNegBuffer[i-1]*(InpRSIPeriod-1)+(diff&lt;0.0?-diff:0.0))/InpRSIPeriod;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(ExtNegBuffer[i]!=0.0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[i]=100.0-100.0/(1+ExtPosBuffer[i]/ExtNegBuffer[i]);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(ExtPosBuffer[i]!=0.0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[i]=100.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExtRSIBuffer[i]=50.0;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(rates_total);</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>&nbsp;</span></p> 
<br>