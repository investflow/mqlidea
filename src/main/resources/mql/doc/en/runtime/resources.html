<h1>Resources</h1> 
<h2>Using graphics and sound in MQL4 programs</h2> 
<p><span>Programs in MQL4 allow working with sound and graphic files:</span></p> 
<ul style="text-indent:0px; padding-left:0; margin-top:0; margin-bottom:0; margin-left: 30px;list-style-position:outside; list-style-type:disc"> 
 <li style="text-align: justify; padding: 0px 0px 0px 0px; margin-top: 3px; margin-right: 17px; margin-bottom: 3px;"><span><a href="/common/playsound">PlaySound()</a> plays a sound file;</span></li> 
 <li style="text-align: justify; padding: 0px 0px 0px 0px; margin-top: 3px; margin-right: 17px; margin-bottom: 3px;"><span><a href="/objects/objectcreate">ObjectCreate()</a> allows creating user interfaces using <a href="/constants/objectconstants/enum_object">graphical objects</a> OBJ_BITMAP and OBJ_BITMAP_LABEL. </span></li> 
</ul> 
<p><span>&nbsp;</span></p> 
<h3>PlaySound()</h3> 
<p><span>Example of call of the </span><span><a href="/common/playsound">PlaySound()</a> function:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Calls&nbsp;standard&nbsp;OrderSend()&nbsp;and&nbsp;plays&nbsp;a&nbsp;sound&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;OrderSendWithAudio()</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;price=</span><span style="color: #0000ff;">Ask</span><span>;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;place&nbsp;market&nbsp;order&nbsp;to&nbsp;buy&nbsp;1&nbsp;lot</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;ticket=</span><span style="color: #0000ff;">OrderSend</span><span>(</span><span style="color: #0000ff;">Symbol</span><span>(),</span><span style="color: #0000ff;">OP_BUY</span><span>,1,price,3,0,0,</span><span style="color: #008080;">"My&nbsp;order"</span><span>,16384,0,</span><span style="color: #0000ff;">clrGreen</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(ticket&lt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"OrderSend&nbsp;failed&nbsp;with&nbsp;error&nbsp;#"</span><span>,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;if&nbsp;error&nbsp;play&nbsp;sound&nbsp;from&nbsp;timeout.wav</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PlaySound</span><span>(</span><span style="color: #008080;">"timeout.wav"</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"OrderSend&nbsp;placed&nbsp;successfully"</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;if&nbsp;success,&nbsp;play&nbsp;sound&nbsp;from&nbsp;Ok.wav&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PlaySound</span><span>(</span><span style="color: #008080;">"Ok.wav"</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>The example shows how to play sounds from files 'Ok.wav' and 'timeout.wav', which are included into the standard terminal package. These files are located in the folder </span><span style="font-weight: bold;">terminal_directory\Sounds</span><span>. Here </span><span style="font-weight: bold;">terminal_directory</span><span> is a folder, from which the MetaTrader 4 Client Terminal is started. The location of the terminal directory can be found out from an mql4 program in the following way:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;Folder,&nbsp;in&nbsp;which&nbsp;terminal&nbsp;data&nbsp;are&nbsp;stored</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;terminal_path=</span><span style="color: #0000ff;">TerminalInfoString</span><span>(</span><span style="color: #0000ff;">TERMINAL_PATH</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>You can use sound files not only from the folder </span><span style="font-weight: bold;">terminal_directory\Sounds</span><span>, but also from any subfolder located in </span><span style="font-weight: bold;">terminal_data_directory\MQL4. </span><span>You can find out the location of the terminal data directory from the terminal menu "File" -&gt; "Open Data Folder" or using program method:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;Folder,&nbsp;in&nbsp;which&nbsp;terminal&nbsp;data&nbsp;are&nbsp;stored</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;terminal_data_path=</span><span style="color: #0000ff;">TerminalInfoString</span><span>(</span><span style="color: #0000ff;">TERMINAL_DATA_PATH</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>For example, if the Demo.wav sound file is located in terminal_data_directory\MQL4\Files, then call of PlaySound() should be written the following way:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;play&nbsp;Demo.wav&nbsp;from&nbsp;the&nbsp;folder&nbsp;terminal_directory_data\MQL4\Files\</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PlaySound</span><span>(</span><span style="color: #008080;">"\\Files\\Demo.wav"</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>Please note that in the comment the path to the file is written using backslash "\", and in the function "\\" is used.</span></p> 
<p><span>When specifying the path, always use only the double backslash as a separator, because a single backslash is a control symbol for the compiler when dealing with constant strings and <a href="/basis/types/integer/symbolconstants">character constants</a> in the program source code. </span></p> 
<p><span>Call <a href="/common/playsound">PlaySound()</a> function with NULL parameter to stop playback:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;call&nbsp;of&nbsp;PlaySound()&nbsp;with&nbsp;NULL&nbsp;parameter&nbsp;stops&nbsp;playback</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PlaySound</span><span>(</span><span style="color: #0000ff;">NULL</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>&nbsp;</span></p> 
<h3>ObjectCreate()</h3> 
<p><span>Example of an Expert Advisor, which creates a graphical label (OBJ_BITMAP_LABEL) using the ObjectCreate() function.</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">string</span><span>&nbsp;label_name=</span><span style="color: #008080;">"currency_label"</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;name&nbsp;of&nbsp;the&nbsp;OBJ_BITMAP_LABEL&nbsp;object</span><br> <span style="color: #0000ff;">string</span><span>&nbsp;euro&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</span><span style="color: #008080;">"\\Images\\euro.bmp"</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;path&nbsp;to&nbsp;the&nbsp;file&nbsp;terminal_data_directory\MQL4\Images\euro.bmp</span><br> <span style="color: #0000ff;">string</span><span>&nbsp;dollar&nbsp;&nbsp;&nbsp;&nbsp;=</span><span style="color: #008080;">"\\Images\\dollar.bmp"</span><span>;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;path&nbsp;to&nbsp;the&nbsp;file&nbsp;terminal_data_directory\MQL4\Images\dollar.bmp</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Expert&nbsp;initialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">OnInit</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;create&nbsp;a&nbsp;button&nbsp;OBJ_BITMAP_LABEL,&nbsp;if&nbsp;it&nbsp;hasn't&nbsp;been&nbsp;created&nbsp;yet</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">ObjectFind</span><span>(0,label_name)&lt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;trying&nbsp;to&nbsp;create&nbsp;object&nbsp;OBJ_BITMAP_LABEL</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">bool</span><span>&nbsp;created=</span><span style="color: #0000ff;">ObjectCreate</span><span>(0,label_name,</span><span style="color: #0000ff;">OBJ_BITMAP_LABEL</span><span>,0,0,0);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(created)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;link&nbsp;the&nbsp;button&nbsp;to&nbsp;the&nbsp;left&nbsp;upper&nbsp;corner&nbsp;of&nbsp;the&nbsp;chart</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetInteger</span><span>(0,label_name,</span><span style="color: #0000ff;">OBJPROP_CORNER</span><span>,</span><span style="color: #0000ff;">CORNER_RIGHT_UPPER</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;now&nbsp;set&nbsp;up&nbsp;the&nbsp;object&nbsp;properties</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetInteger</span><span>(0,label_name,</span><span style="color: #0000ff;">OBJPROP_XDISTANCE</span><span>,100);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectSetInteger</span><span>(0,label_name,</span><span style="color: #0000ff;">OBJPROP_YDISTANCE</span><span>,50);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;reset&nbsp;the&nbsp;code&nbsp;of&nbsp;the&nbsp;last&nbsp;error&nbsp;to&nbsp;0</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ResetLastError</span><span>();</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;download&nbsp;a&nbsp;picture&nbsp;to&nbsp;indicate&nbsp;the&nbsp;"Pressed"&nbsp;state&nbsp;of&nbsp;the&nbsp;button</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">bool</span><span>&nbsp;set=</span><span style="color: #0000ff;">ObjectSetString</span><span>(0,label_name,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,0,euro);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;test&nbsp;the&nbsp;result</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(!set)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Failed&nbsp;to&nbsp;download&nbsp;image&nbsp;from&nbsp;file&nbsp;%s.&nbsp;Error&nbsp;code&nbsp;%d"</span><span>,euro,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ResetLastError</span><span>();</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;download&nbsp;a&nbsp;picture&nbsp;to&nbsp;indicate&nbsp;the&nbsp;"Unpressed"&nbsp;state&nbsp;of&nbsp;the&nbsp;button</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set=</span><span style="color: #0000ff;">ObjectSetString</span><span>(0,label_name,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,1,dollar);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(!set)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Failed&nbsp;to&nbsp;download&nbsp;image&nbsp;from&nbsp;file&nbsp;%s.&nbsp;Error&nbsp;code&nbsp;%d"</span><span>,dollar,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;send&nbsp;a&nbsp;command&nbsp;for&nbsp;a&nbsp;chart&nbsp;to&nbsp;refresh&nbsp;so&nbsp;that&nbsp;the&nbsp;button&nbsp;appears&nbsp;immediately&nbsp;without&nbsp;a&nbsp;tick</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ChartRedraw</span><span>(0);</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//---&nbsp;failed&nbsp;to&nbsp;create&nbsp;an&nbsp;object,&nbsp;notify</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Failed&nbsp;to&nbsp;create&nbsp;object&nbsp;OBJ_BITMAP_LABEL.&nbsp;Error&nbsp;code&nbsp;%d"</span><span>,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">INIT_SUCCEEDED</span><span>);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Expert&nbsp;deinitialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnDeinit</span><span>(</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;reason)</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;delete&nbsp;an&nbsp;object&nbsp;from&nbsp;a&nbsp;chart&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">ObjectDelete</span><span>(0,label_name);</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>Creation and setup of the graphical object named currency_label are carried out in the </span><span>OnInit() function. The paths to the graphical files are set in <a href="/basis/variables/global">global variables</a> </span><span style="font-weight: bold;">euro</span><span> and </span><span style="font-weight: bold;">dollar</span><span>, a double backlash is used for a separator:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">string</span><span>&nbsp;euro&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=</span><span style="color: #008080;">"\\Images\\euro.bmp"</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;path&nbsp;to&nbsp;the&nbsp;file&nbsp;terminal_dara_directory\MQL4\Images\euro.bmp</span><br> <span style="color: #0000ff;">string</span><span>&nbsp;dollar&nbsp;&nbsp;&nbsp;&nbsp;=</span><span style="color: #008080;">"\\Images\\dollar.bmp"</span><span>;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;path&nbsp;to&nbsp;the&nbsp;file&nbsp;terminal_dara_directory\MQL4\Images\dollar.bmp</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>The files are located in the folder </span><span style="font-weight: bold;">terminal_data_directory\</span><span>MQL4\Images.</span></p> 
<p><span>Object OBJ_BITMAP_LABEL is actually a button, which displays one of the two images, depending on the button state (pressed or unpressed): euro.bmp or dollar.bmp.</span></p> 
<p style="text-align: center;"><img alt="Properties of the OBJ_BITMAP_LABEL object" title="Properties of the OBJ_BITMAP_LABEL object" width="537" height="297" style="margin:0px auto 0px auto;width:537px;height:297px;border:none" src="https://c.mql4.com/i/docs/en/demo_create_obj_bitmap_label_ea.png"></p> 
<p><span>The size of the button with a graphical interface is automatically adjusted to the size of the picture. The image is changed by a left mouse button click on the OBJ_BITMAP_LABEL object (</span><span style="font-weight: bold;">"Disable selection" option must be checked in the properties</span><span>). The OBJ_BITMAP object is created the same way - it is used for creating the background with a necessary image. </span></p> 
<p><span>The value of the <a href="/constants/objectconstants/enum_object_property#enum_object_property_integer">OBJPROP_BMPFILE</a> property, which is responsible for the appearance of the objects </span><span>OBJ_BITMAP and OBJ_BITMAP_LABEL</span><span>, can be changed dynamically. This allows creating various interactive user interfaces for mql4 programs.</span></p> 
<p><span>&nbsp;</span></p> 
<h2><a id="resource_include"></a>Including resources to executable files during compilation of mql4 programs</h2> 
<p><span>An mql4 program may need a lot of different downloadable resources in the form of image and sound files. In order to eliminate the need to transfer all these files when moving an executable file in MQL4, the compiler's directive </span><span style="color: #0000ff;">#resource</span><span> should be used:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>&nbsp;</span><span style="color: #0000ff;">#resource</span><span>&nbsp;path_to_resource_file</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>The </span><span style="color: #0000ff;">#resource</span><span> command tells the compiler that the resource at the specified path </span><span style="font-weight: bold;">path_to_resource_file</span><span> should be included into the executable EX5 file. Thus all the necessary images and sounds can be &nbsp;located directly in an EX4 file, so that there is no need to transfer separately the files used in it, if you want to run the program on a different terminal. Any EX4 file can contain resources, and any EX4 program can use resources from another EX4 program.</span></p> 
<p><span>The files in format BMP and WAV are automatically compressed before including them to an EX4 file. This denotes that in addition to the creation of complete programs in MQL4, using resources also allows to reduce the total size of necessary files when using graphics and sounds, as compared to the usual way of MQL4 program writing.</span></p> 
<p><span>The resource file size must not exceed 16 Mb.</span></p> 
<p><span>&nbsp;</span></p> 
<h2>Search for specified resources by a compiler</h2> 
<p><span>A resource is inserted using the command #resource "&lt;path to the resource file&gt;"</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>&nbsp;</span><span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"&lt;path_to_resource_file&gt;"</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>The length of the constant string &lt;path_to_resource_file&gt; must not exceed 63 characters.</span></p> 
<p><span>The file and folder names, included as resources, must be in English.</span></p> 
<p><span>The compiler searches for a resource at the specified path in the following order:</span></p> 
<ul style="text-indent:0px; padding-left:0; margin-top:0; margin-bottom:0; margin-left: 30px;list-style-position:outside; list-style-type:disc"> 
 <li style="text-align: justify; padding: 0px 0px 0px 0px; margin-top: 3px; margin-right: 17px; margin-bottom: 3px;"><span>if the backslash "\" separator (written as "\\") is placed at &nbsp;the beginning of the path, it searches for the resource relative to the directory </span><span style="font-weight: bold;">terminal_data_directory</span><span>\MQL4\,</span></li> 
 <li style="text-align: justify; padding: 0px 0px 0px 0px; margin-top: 3px; margin-right: 17px; margin-bottom: 3px;"><span>if there is no backslash, it searches for the resource relative to the location of the source file, in which the resource is written.</span></li> 
</ul> 
<p><span>The resource path cannot contain the substrings "..\\" and ":\\".</span></p> 
<p><span>Examples of resource inclusion:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;correct&nbsp;specification&nbsp;of&nbsp;resources</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Images\\euro.bmp"</span><span>&nbsp;</span><span style="color: #808080;">//&nbsp;euro.bmp&nbsp;is&nbsp;located&nbsp;in&nbsp;terminal_data_directory\MQL4\Images\</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"picture.bmp"</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;picture.bmp&nbsp;is&nbsp;located&nbsp;in&nbsp;the&nbsp;same&nbsp;directory&nbsp;as&nbsp;the&nbsp;source&nbsp;file</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"Resource\\map.bmp"</span><span>&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;the&nbsp;resource&nbsp;is&nbsp;located&nbsp;in&nbsp;source_file_directory\Resource\map.bmp</span><br> <span style="color: #808080;">&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;incorrect&nbsp;specification&nbsp;of&nbsp;resources</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">":picture_2.bmp"</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;must&nbsp;not&nbsp;contain&nbsp;":"</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"..\\picture_3.bmp"</span><span>&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;must&nbsp;not&nbsp;contain&nbsp;".."</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Files\\Images\\Folder_First\\My_panel\\Labels\\too_long_path.bmp"</span><span>&nbsp;</span><span style="color: #808080;">//more&nbsp;than&nbsp;63&nbsp;symbols</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>&nbsp;</span></p> 
<h2>Use of Resources</h2> 
<h3>Resource name </h3> 
<p><span>After a resource is declared using the </span><span style="color: #0000ff;">#resource</span><span> directive, it can be used in any part of a program. The name of the resource is its path without a backslash at the beginning of the line, which sets the path to the resource. To use your own resource in the code, the special sign "::" should be added before the resource name.</span></p> 
<p><span>Examples:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;examples&nbsp;of&nbsp;resource&nbsp;specification&nbsp;and&nbsp;their&nbsp;names&nbsp;in&nbsp;comments</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Images\\euro.bmp"</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;resource&nbsp;name&nbsp;-&nbsp;Images\euro.bmp</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"picture.bmp"</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;resource&nbsp;name&nbsp;-&nbsp;picture.bmp</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"Resource\\map.bmp"</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;resource&nbsp;name&nbsp;-&nbsp;Resource\map.bmp</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Files\\Pictures\\good.bmp"</span><span>&nbsp;</span><span style="color: #808080;">//&nbsp;resource&nbsp;name&nbsp;-&nbsp;Files\Pictures\good.bmp</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Files\\Demo.wav"</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;resource&nbsp;name&nbsp;-&nbsp;Files\Demo.wav"</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Sounds\\thrill.wav"</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;resource&nbsp;name&nbsp;-&nbsp;Sounds\thrill.wav"</span><br> <span>...&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;</span><br> <span style="color: #808080;">//---&nbsp;utilization&nbsp;of&nbsp;resources</span><br> <span style="color: #0000ff;">ObjectSetString</span><span>(0,bitmap_name,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,0,</span><span style="color: #008080;">"::Images\\euro.bmp"</span><span>);</span><br> <span>...</span><br> <span style="color: #0000ff;">ObjectSetString</span><span>(0,my_bitmap,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,0,</span><span style="color: #008080;">"::picture.bmp"</span><span>);</span><br> <span>...</span><br> <span>set=</span><span style="color: #0000ff;">ObjectSetString</span><span>(0,bitmap_label,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,1,</span><span style="color: #008080;">"::Files\\Pictures\\good.bmp"</span><span>);</span><br> <span>...</span><br> <span style="color: #0000ff;">PlaySound</span><span>(</span><span style="color: #008080;">"::Files\\Demo.wav"</span><span>);</span><br> <span>...</span><br> <span style="color: #0000ff;">PlaySound</span><span>(</span><span style="color: #008080;">"::Sounds\\thrill.wav"</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>It should be noted that when setting images from a resource to the </span><span>OBJ_BITMAP and OBJ_BITMAP_LABEL objects, the value of the OBJPROP_BMPFILE property cannot be modified manually. For example, for creating OBJ_BITMAP_LABEL we use resources euro.bmp and dollar.bmp.</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Images\\euro.bmp"</span><span>;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;euro.bmp&nbsp;is&nbsp;located&nbsp;in&nbsp;terminal_data_directory\MQL4\Images\</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Images\\dollar.bmp"</span><span>;&nbsp;&nbsp;</span><span style="color: #808080;">//&nbsp;dollar.bmp&nbsp;is&nbsp;located&nbsp;in&nbsp;terminal_data_directory\MQL4\Images\</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>When viewing the properties of this object, we'll see that the properties BitMap File (On) and BitMap File (Off) are dimmed and cannot be change manually:</span></p> 
<p style="text-align: center;"><img alt="using_resource" width="505" height="301" style="margin:0px auto 0px auto;width:505px;height:301px;border:none" src="https://c.mql4.com/i/docs/en/using_resource.png"></p> 
<p><span>&nbsp;</span></p> 
<h3>Using the resources of other mql4 programs</h3> 
<p><span>There is another advantage of using resources  in any MQL4 program, resources of another EX4 file can be used. Thus the resources from one EX4 file can be used in many other mql4 programs.</span></p> 
<p><span>In order to use a resource name from another file, it should be specified as &lt;path_EX4_file_name&gt;::&lt;resource_name&gt;. For example, suppose the Draw_Triangles_Script.mq5 script contains a resource to an image in the file triangle.bmp:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>&nbsp;</span><span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Files\\triangle.bmp"</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>Then its name, for using in the script itself, will look like "Files\triangle.bmp", and in order to use it, "::" should be added to the resource name.</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;using&nbsp;the&nbsp;resource&nbsp;in&nbsp;the&nbsp;script</span><br> <span style="color: #0000ff;">ObjectSetString</span><span>(0,my_bitmap_name,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,0,</span><span style="color: #008080;">"::Files\\triangle.bmp"</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>In order to use the same resource from another program, e.g. from an Expert Advisor, we need to add to the resource name the path to the EX4 file relative to </span><span style="font-weight: bold;">terminal_data_directory\MQL4\</span><span> and the name of the script's </span><span>EX4 file - </span><span style="font-weight: bold;">Draw_Triangles_Script.ex4</span><span>. Suppose the script is located in the standard folder </span><span style="font-weight: bold;">terminal_data_directory\MQL4\</span><span>Scripts\, then the call should be written the following way:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;using&nbsp;a&nbsp;resource&nbsp;from&nbsp;a&nbsp;script&nbsp;in&nbsp;an&nbsp;EA</span><br> <span style="color: #0000ff;">ObjectSetString</span><span>(0,my_bitmap_name,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,0,</span><span style="color: #008080;">"\\Scripts\\Draw_Triangles_Script.ex4::Files\\triangle.bmp"</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>If the path to the executable file is not specified when calling the resource from another EX4, the executable file is searched for in the same folder that contains the program that calls the resource. This means that if an Expert Advisor calls a resource from </span><span>Draw_Triangles_Script.ex4 without specification of the path, like this:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//---&nbsp;call&nbsp;script&nbsp;resource&nbsp;in&nbsp;an&nbsp;EA&nbsp;without&nbsp;specifying&nbsp;the&nbsp;path</span><br> <span style="color: #0000ff;">ObjectSetString</span><span>(0,my_bitmap_name,</span><span style="color: #0000ff;">OBJPROP_BMPFILE</span><span>,0,</span><span style="color: #008080;">"Draw_Triangles_Script.ex4::Files\\triangle.bmp"</span><span>);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>then the file will be searched for in the folder </span><span style="font-weight: bold;">terminal_data_directory\MQL4\</span><span>Experts\, if the Expert Advisor is located in </span><span style="font-weight: bold;">terminal_data_directory\MQL4\</span><span>Experts\.</span></p> 
<p><span>&nbsp;</span></p> 
<h3>Working with custom indicators included as resources</h3> 
<p><span>One or several custom indicators may be necessary for the operation of MQL4 applications. All of them can be included into the code of an executable MQL5 program. Inclusion of indicators as resources simplifies the distribution of applications.</span></p> 
<p><span>Below is an example of including and using SampleIndicator.ex4 custom indicator located in </span><span style="font-weight: bold;">terminal_data_folder</span><span>\MQL4\Indicators\ directory:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SampleEA.mq4&nbsp;|</span><br> <span style="color: #808080;">//|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;2013,&nbsp;MetaQuotes&nbsp;Software&nbsp;Corp.&nbsp;|</span><br> <span style="color: #808080;">//|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.mql5.com&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">#resource</span><span>&nbsp;</span><span style="color: #008080;">"\\Indicators\\SampleIndicator.ex4"</span><br> <span style="color: #0000ff;">#property&nbsp;strict</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Expert&nbsp;initialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">OnInit</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;get&nbsp;custom&nbsp;indicator&nbsp;value</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;value=</span><span style="color: #0000ff;">iCustom</span><span>(</span><span style="color: #0000ff;">_Symbol</span><span>,</span><span style="color: #0000ff;">_Period</span><span>,</span><span style="color: #008080;">"::Indicators\\SampleIndicator.ex4"</span><span>,0,0);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Indicator:&nbsp;iCustom&nbsp;value=%f"</span><span>,value);</span><br> <span style="color: #808080;">//---&nbsp;...</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">INIT_SUCCEEDED</span><span>);</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>The case when a custom indicator in <a href="/basis/function/events#oninit">OnInit()</a> function creates one or more copies of itself requires special consideration. Please keep in mind that the resource should be specified in the following way: </span><span style="font-weight: bold;">&lt;path_EX4_file_name&gt;::&lt;resource_name&gt;</span><span>.</span></p> 
<p><span>For example, if SampleIndicator.ex4 indicator is included to SampleEA.ex4 Expert Advisor as a resource, the path to itself specified when calling <a href="/indicators/icustom">iCustom()</a> in the custom indicator's initialization function looks the following way: "\\Experts\\SampleEA.ex4::Indicators\\SampleIndicator.ex4". When this path is set explicitly, SampleIndicator.ex4 custom indicator is rigidly connected to SampleEA.ex4 Expert Advisor losing ability to work independently.</span></p> 
<p><span>The path to itself can be received using GetRelativeProgramPath() function. The example of its usage is provided below:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SampleIndicator.mq4&nbsp;|</span><br> <span style="color: #808080;">//|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Copyright&nbsp;2013,&nbsp;MetaQuotes&nbsp;Software&nbsp;Corp.&nbsp;|</span><br> <span style="color: #808080;">//|&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;https://www.mql5.com&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">#property</span><span>&nbsp;</span><span style="color: #0000ff;">indicator_separate_window</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Custom&nbsp;indicator&nbsp;initialization&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">OnInit</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;the&nbsp;wrong&nbsp;way&nbsp;to&nbsp;provide&nbsp;a&nbsp;link&nbsp;to&nbsp;itself</span><br> <span style="color: #808080;">//---&nbsp;string&nbsp;path="\\Experts\\SampleEA.ex4::Indicators\\SampleIndicator.ex4";</span><br> <span style="color: #808080;">//---&nbsp;the&nbsp;right&nbsp;way&nbsp;to&nbsp;receive&nbsp;a&nbsp;link&nbsp;to&nbsp;itself</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;path=GetRelativeProgramPath();</span><br> <span style="color: #808080;">//---&nbsp;get&nbsp;indicator&nbsp;value</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;value=</span><span style="color: #0000ff;">iCustom</span><span>(</span><span style="color: #0000ff;">_Symbol</span><span>,</span><span style="color: #0000ff;">_Period</span><span>,path,0,0);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">PrintFormat</span><span>(</span><span style="color: #008080;">"Path=%s,&nbsp;iCustom&nbsp;value=%f"</span><span>,path,value);</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">INIT_SUCCEEDED</span><span>);</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">///....</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;GetRelativeProgramPath&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">string</span><span>&nbsp;GetRelativeProgramPath()</span><br> <span>&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;pos2;</span><br> <span style="color: #808080;">//---&nbsp;get&nbsp;the&nbsp;absolute&nbsp;path&nbsp;to&nbsp;the&nbsp;application</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">string</span><span>&nbsp;path=</span><span style="color: #0000ff;">MQLInfoString</span><span>(</span><span style="color: #0000ff;">MQL_PROGRAM_PATH</span><span>);</span><br> <span style="color: #808080;">//---&nbsp;find&nbsp;the&nbsp;position&nbsp;of&nbsp;"\MQL4\"&nbsp;substring</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;&nbsp;&nbsp;&nbsp;pos&nbsp;=</span><span style="color: #0000ff;">StringFind</span><span>(path,</span><span style="color: #008080;">"\\MQL4\\"</span><span>);</span><br> <span style="color: #808080;">//---&nbsp;substring&nbsp;not&nbsp;found&nbsp;-&nbsp;error</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(pos&lt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">NULL</span><span>);</span><br> <span style="color: #808080;">//---&nbsp;skip&nbsp;"\MQL4"&nbsp;directory</span><br> <span>&nbsp;&nbsp;&nbsp;pos+=5;</span><br> <span style="color: #808080;">//---&nbsp;skip&nbsp;extra&nbsp;'\'&nbsp;symbols</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">while</span><span>(</span><span style="color: #0000ff;">StringGetCharacter</span><span>(path,pos+1)=='\\')</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pos++;</span><br> <span style="color: #808080;">//---&nbsp;if&nbsp;this&nbsp;is&nbsp;a&nbsp;resource,&nbsp;return&nbsp;the&nbsp;path&nbsp;relative&nbsp;to&nbsp;MQL5&nbsp;directory</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(</span><span style="color: #0000ff;">StringFind</span><span>(path,</span><span style="color: #008080;">"::"</span><span>,pos)&gt;=0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">StringSubstr</span><span>(path,pos));</span><br> <span style="color: #808080;">//---&nbsp;find&nbsp;a&nbsp;separator&nbsp;for&nbsp;the&nbsp;first&nbsp;MQL4&nbsp;subdirectory&nbsp;(for&nbsp;example,&nbsp;MQL4\Indicators)</span><br> <span style="color: #808080;">//---&nbsp;if&nbsp;not&nbsp;found,&nbsp;return&nbsp;the&nbsp;path&nbsp;relative&nbsp;to&nbsp;MQL4&nbsp;directory</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>((pos2=</span><span style="color: #0000ff;">StringFind</span><span>(path,</span><span style="color: #008080;">"\\"</span><span>,pos+1))&lt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">StringSubstr</span><span>(path,pos));</span><br> <span style="color: #808080;">//---&nbsp;return&nbsp;the&nbsp;path&nbsp;relative&nbsp;to&nbsp;the&nbsp;subdirectory&nbsp;(for&nbsp;example,&nbsp;MQL4\Indicators)</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(</span><span style="color: #0000ff;">StringSubstr</span><span>(path,pos2+1));</span><br> <span>&nbsp;&nbsp;}</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Custom&nbsp;indicator&nbsp;iteration&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">int</span><span>&nbsp;</span><span style="color: #0000ff;">OnCalculate</span><span>(</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;rates_total,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;prev_calculated,</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;begin,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">const</span><span>&nbsp;</span><span style="color: #0000ff;">double</span><span>&amp;&nbsp;price[])</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;return&nbsp;value&nbsp;of&nbsp;prev_calculated&nbsp;for&nbsp;next&nbsp;call</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">return</span><span>(rates_total);</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>See also</span></p> 
<p><span><a href="/common/resourcecreate">ResourceCreate()</a>, <a href="/common/resourcesave">ResourceSave()</a>, <a href="/common/playsound">PlaySound()</a>, <a href="/objects/objectsetinteger">ObjectSetInteger()</a>, <a href="/chart_operations/chartapplytemplate">ChartApplyTemplate()</a>, <a href="/files">File Functions</a></span></p> 
<br>