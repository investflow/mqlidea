<h1>OrderSend</h1> 
<p><span>The main function used to open market or place a pending order.</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span>int&nbsp;&nbsp;</span><span>OrderSend</span><span>(</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>string&nbsp;</span><span>&nbsp;&nbsp;</span><span>symbol</span><span style="color: #000000;">,</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;symbol</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>cmd</span><span style="color: #000000;">,&nbsp;</span><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;operation</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double&nbsp;</span><span>&nbsp;&nbsp;</span><span>volume</span><span style="color: #000000;">,</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;volume</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double&nbsp;</span><span>&nbsp;&nbsp;</span><span>price</span><span style="color: #000000;">,</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;price</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>slippage</span><span style="color: #000000;">,</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;slippage</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double&nbsp;</span><span>&nbsp;&nbsp;</span><span>stoploss</span><span style="color: #000000;">,&nbsp;</span><span>&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;stop&nbsp;loss</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>double&nbsp;</span><span>&nbsp;&nbsp;</span><span>takeprofit</span><span style="color: #000000;">,</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;take&nbsp;profit</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>string&nbsp;</span><span>&nbsp;&nbsp;</span><span>comment=NULL</span><span style="color: #000000;">,&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;comment</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>int&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>magic=0</span><span style="color: #000000;">,&nbsp;</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;magic&nbsp;number</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>datetime</span><span>&nbsp;</span><span>expiration=0</span><span style="color: #000000;">,</span><span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span>//&nbsp;pending&nbsp;order&nbsp;expiration</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span>color&nbsp;</span><span>&nbsp;&nbsp;&nbsp;</span><span>arrow_color=clrNONE</span><span style="color: #000000;">&nbsp;&nbsp;</span><span>//&nbsp;color</span><br> <span>&nbsp;&nbsp;&nbsp;);</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<p><span>Parameters</span></p> 
<p><span>symbol</span></p> 
<p><span>[in] &nbsp;Symbol for trading.</span></p> 
<p><span>cmd</span></p> 
<p><span>[in] &nbsp;Operation type. It can be any of the <a href="/constants/tradingconstants/orderproperties">Trade operation</a> enumeration.</span></p> 
<p><span>volume</span></p> 
<p><span>[in] &nbsp;Number of lots.</span></p> 
<p><span>price</span></p> 
<p><span>[in] &nbsp;Order price.</span></p> 
<p><span>slippage</span></p> 
<p><span>[in] &nbsp;Maximum price slippage for buy or sell orders.</span></p> 
<p><span>stoploss</span></p> 
<p><span>[in] &nbsp;Stop loss level.</span></p> 
<p><span>takeprofit</span></p> 
<p><span>[in] &nbsp;Take profit level.</span></p> 
<p><span>comment=NULL</span></p> 
<p><span>[in] &nbsp;Order comment text. Last part of the comment may be changed by server.</span></p> 
<p><span>magic=0</span></p> 
<p><span>[in] &nbsp;Order magic number. May be used as user defined identifier.</span></p> 
<p><span>expiration=0</span></p> 
<p><span>[in] &nbsp;Order expiration time (for pending orders only).</span></p> 
<p><span>arrow_color=clrNONE</span></p> 
<p><span>[in] &nbsp;Color of the opening arrow on the chart. If parameter is missing or has CLR_NONE value opening arrow is not drawn on the chart.</span></p> 
<p><span>Returned value</span></p> 
<p><span>Returns number of the ticket assigned to the order by the trade server or -1 if it fails. To get additional <a href="/constants/errorswarnings/enum_trade_return_codes">error</a> information, one has to call the <a href="/check/getlasterror">GetLastError()</a> function.</span></p> 
<p><span>Note</span></p> 
<p><span>At opening of a market order (OP_SELL or OP_BUY), only the latest prices of Bid (for selling) or Ask (for buying) can be used as open price. If operation is performed with a security differing from the current one, the <a href="/marketinformation/marketinfo">MarketInfo()</a> function must be used with MODE_BID or MODE_ASK parameter for the latest quotes for this security to be obtained. </span></p> 
<p><span>Calculated or unnormalized price cannot be applied. If there has not been the requested open price in the price thread or it has not been normalized according to the amount of digits after decimal point, the error 129 (ERR_INVALID_PRICE) will be generated. If the requested open price is fully out of date, the error 138 (ERR_REQUOTE) will be generated independently on the slippage parameter. If the requested price is out of date, but present in the thread, the order will be opened at the current price and only if the current price lies within the range of price+-slippage.</span></p> 
<p><span>StopLoss and TakeProfit levels cannot be too close to the market. The minimal distance of stop levels in points can be obtained using the <a href="/marketinformation/marketinfo">MarketInfo()</a> function with MODE_STOPLEVEL parameter. In the case of erroneous or unnormalized stop levels, the error 130 (ERR_INVALID_STOPS) will be generated. A zero value of MODE_STOPLEVEL means either absence of any restrictions on the minimal distance for Stop Loss/Take Profit or the fact that a trade server utilizes some external mechanisms for dynamic level control, which cannot be translated in the client terminal. In the second case, GetLastError() can return error 130, because MODE_STOPLEVEL is actually "floating" here.</span></p> 
<p><span>At placing of a pending order, the open price cannot be too close to the market. The minimal distance of the pending price from the current market one in points can be obtained using the <a href="/marketinformation/marketinfo">MarketInfo()</a> function with the MODE_STOPLEVEL parameter. In case of false open price of a pending order, the error 130 (ERR_INVALID_STOPS) will be generated.</span></p> 
<p><span>Applying of pending order expiration time can be disabled in some trade servers. In this case, when a non-zero value is specified in the expiration parameter, the error 147 (ERR_TRADE_EXPIRATION_DENIED) will be generated.</span></p> 
<p><span>On some trade servers, the total amount of open and pending orders can be limited. If this limit has been exceeded, no new order will be opened (or no pending order will be placed) and trade server will return error 148 (ERR_TRADE_TOO_MANY_ORDERS).</span></p> 
<p><span style="font-weight: bold;">Example:</span></p> 
<div style="text-align: left; text-indent: 0px; line-height: 1.0; page-break-inside: avoid; border-color: #b3b3b3; border-style: solid; border-width: thin; background: #fbf9f5; padding: 0px 0px 0px 0px; margin: 2px 17px 2px 17px;">
 <table cellpadding="3" style="border:none; border-spacing:0px;"> 
  <tbody>
   <tr>
    <td style="vertical-align:top; padding:3px;"><p><span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #808080;">//|&nbsp;Script&nbsp;program&nbsp;start&nbsp;function&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;|</span><br> <span style="color: #808080;">//+------------------------------------------------------------------+</span><br> <span style="color: #0000ff;">void</span><span>&nbsp;</span><span style="color: #0000ff;">OnStart</span><span>()</span><br> <span>&nbsp;&nbsp;{</span><br> <span style="color: #808080;">//---&nbsp;get&nbsp;minimum&nbsp;stop&nbsp;level</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;minstoplevel=</span><span style="color: #0000ff;">MarketInfo</span><span>(</span><span style="color: #0000ff;">Symbol</span><span>(),</span><span style="color: #0000ff;">MODE_STOPLEVEL</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"Minimum&nbsp;Stop&nbsp;Level="</span><span>,minstoplevel,</span><span style="color: #008080;">"&nbsp;points"</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;price=</span><span style="color: #0000ff;">Ask</span><span>;</span><br> <span style="color: #808080;">//---&nbsp;calculated&nbsp;SL&nbsp;and&nbsp;TP&nbsp;prices&nbsp;must&nbsp;be&nbsp;normalized</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;stoploss=</span><span style="color: #0000ff;">NormalizeDouble</span><span>(</span><span style="color: #0000ff;">Bid</span><span>-minstoplevel*</span><span style="color: #0000ff;">Point</span><span>,</span><span style="color: #0000ff;">Digits</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">double</span><span>&nbsp;takeprofit=</span><span style="color: #0000ff;">NormalizeDouble</span><span>(</span><span style="color: #0000ff;">Bid</span><span>+minstoplevel*</span><span style="color: #0000ff;">Point</span><span>,</span><span style="color: #0000ff;">Digits</span><span>);</span><br> <span style="color: #808080;">//---&nbsp;place&nbsp;market&nbsp;order&nbsp;to&nbsp;buy&nbsp;1&nbsp;lot</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">int</span><span>&nbsp;ticket=</span><span style="color: #0000ff;">OrderSend</span><span>(</span><span style="color: #0000ff;">Symbol</span><span>(),</span><span style="color: #0000ff;">OP_BUY</span><span>,1,price,3,stoploss,takeprofit,</span><span style="color: #008080;">"My&nbsp;order"</span><span>,16384,0,</span><span style="color: #0000ff;">clrGreen</span><span>);</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">if</span><span>(ticket&lt;0)</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"OrderSend&nbsp;failed&nbsp;with&nbsp;error&nbsp;#"</span><span>,</span><span style="color: #0000ff;">GetLastError</span><span>());</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}</span><br> <span>&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">else</span><br> <span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span style="color: #0000ff;">Print</span><span>(</span><span style="color: #008080;">"OrderSend&nbsp;placed&nbsp;successfully"</span><span>);</span><br> <span style="color: #808080;">//---</span><br> <span>&nbsp;&nbsp;}</span></p></td> 
   </tr> 
  </tbody>
 </table> 
</div> 
<br>